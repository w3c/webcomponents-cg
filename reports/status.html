<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Web Components Community Group: 2021 Spec/API status</title>
    <script
      src="https://www.w3.org/Tools/respec/respec-w3c"
      class="remove"
      defer
    ></script>
    <script class="remove">
      // All config options at https://respec.org/docs/
      var respecConfig = {
        specStatus: "CG-DRAFT",
        latestVersion: null,
        edDraftURI: null,
        editors: [
          {
            name: "Westbrook Johnson",
            url: "https://westbrookjohnson.com",
          },
          {
            name: "Alan Dávalos",
            url: "https://github.com/alangdm",
          }
        ],
        github: "w3c/webcomponents-cg",
        shortName: "webcomponents-cg",
        xref: "web-platform",
        group: "webcomponents",
        tocIntroductory: true,
      };
    </script>
  </head>
  <body>
    <section id="abstract">
      <p>This is required.</p>
    </section>
    <section id="sotd">
      <p>This is required.</p>
    </section>
    <section class="informative">
      <h2>Introduction</h2>
      <p>The initial slate of APIs that browsers shipped with web components "v1" left many important features and use-cases on a future to-do list, to be finalized out after the core custom element and shadow DOM features landed. While the web components GitHub issues and face-to-face meets have tracked and discussed many of these features individually, there hasn't been a comprehensive overview of what's left to "finish" web components.</p>
      <p>This document tries to highlight the main features that are lacking from the web components spec that either block adoption for more developers and frameworks, or cause pain points for existing developers.</p>
      <p>It's worth noting that many of these pain points are directly related to Shadow DOM's encapsulation. While there are many benefits to some types of widely shared components to strong encapsulation, the friction of strong encapsulation has prevented most developers from adopting Shadow DOM, to the point of there being alternate proposals for style scoping that don't use Shadow DOM. We urge browser vendors to recognize these barriers and work to make Shadow DOM more usable by more developers.</p>
      <table>
        <thead>
          <tr>
            <th>Feature or Problem</th>
            <th>GitHub Issue(s)</th>
            <th>Priority</th>
            <th>Status(?)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th><a href="#cross-root-aria">Cross-root ARIA</a></th>
            <td>
              <a href="https://github.com/WICG/aom/issues/169">WICG/aom#169</a><br>
              <a href="https://github.com/WICG/aom/issues/107">WICG/aom#107</a><br>
              <a href="https://github.com/WICG/webcomponents/issues/917">WICG/webcomponents#917</a><br>
              <a href="https://github.com/WICG/webcomponents/issues/916">WICG/webcomponents#916</a>
            </td>
            <td>Critial</td>
            <td>Uncertian</td>
          </tr>
          <tr>
            <th><a href="#form-associated-custom-elements">Form-Associated Custom Elements</a></th>
            <td><a href="https://github.com/WICG/webcomponents/issues/187">WICG/webcomponents#187</a></td>
            <td>Critical</td>
            <td>Some implementation</td>
          </tr>
          <tr>
            <th>---</th>
            <td>---</td>
            <td>---</td>
            <td>---</td>
          </tr>
        </tbody>
      </table>
    </section>
     <section>
      <h2>Form-Associated Custom Elements</h2>
      <dl>
        <dt>GitHub Issue(s):</dt>
        <dd><a href="https://github.com/WICG/webcomponents/issues/187">WICG/webcomponents#187</a></dd>
        <dt>Priority:</dt>
        <dd>Critical</dd>
        <dt>Status:</dt>
        <dd>Some implementation</dd>
      </dl>
      <section>
        <h3>Description</h3>
        <p>Form-associated custom elements allow custom elements to participate in forms to the same degree as native elements, including integrations with the form’s validation, state, and submission as well as exposing the Accessibility Object Model to the element.</p>
        <p>A sample use case can be found in <a href="https://css-tricks.com/creating-custom-form-controls-with-elementinternals/">this article by Caleb Williams</a>.</p>
      </section>
      <section>
        <h3>Motivation</h3>
        <p>One of the most common use cases for web components is creating form controls not available natively. Some examples include switches and credit card inputs.</p>
        <p>There is no way for forms to fully integrate with form elements located in a different shadow root the same way they would with form elements in the same root. The only options available to achieve a similar result are:</p>
        <ul>
          <li>The formdata event: this event only provides integration on form submission. Using this feature alone may also lead to accessibility issues due to the lack of cross-root ARIA.</li>
          <li>
            Setting a form element in light DOM (e.g. using slots): this gives web components authors two main options both of which will only work with standard form elements, mostly for form submission, and require both implementers and end users to write more code:
            <ul>
              <li>Visually hide the form element in light DOM and synchronize its value to a visible form element located inside the web component’s shadow root.</li>
              <li>Have both the form element and its label located in slots and forgo the granular control shadow DOM gives you over how to allow for CSS customization.</li>
            </ul>
          </li>
        </ul>
        <p>This situation has forced developers to either not use web components for form elements or create their own form systems that allow for full integration (e.g. many big web component libraries such as Lion or Shoelace provide form systems that integrate with their components). This limits the reach web components could have as plug-in form elements for projects created with different tech stacks.</p>
      </section>
    </section>
    <section>
      <h2>Cross-root ARIA</h2>
      <dl>
        <dt>GitHub Issue(s):</dt>
        <dd><a href="https://github.com/WICG/aom/issues/169">WICG/aom#169</a></dd>
        <dd><a href="https://github.com/WICG/aom/issues/107">WICG/aom#107</a></dd>
        <dd><a href="https://github.com/WICG/webcomponents/issues/917">WICG/webcomponents#917</a></dd>
        <dd><a href="https://github.com/WICG/webcomponents/issues/916">WICG/webcomponents#916</a></dd>
        <dt>Priority:</dt>
        <dd>Critial</dd>
        <dt>Status:</dt>
        <dd>Uncertian</dd>
      </dl>
      <section>
        <h3>Description</h3>
        <ol>
          <li>Shadow root encapsulation currently prevents references between elements in different roots. Croot-root ARIA references would re-enable this platform feature within shadow roots.</li>
          <li>It's not possible to "forward" ARIA attributes from a custom element host into elements in the host's shadow root. For instance, a custom input that wants to allow users to customize the ARIA role, has no way to forward the role attribute to the encapsulated native input.</li>
        </ol>
      </section>
      <section>
        <h3>Motivation</h3>
        <p>It's critically important that content on the web be accessible. Making web component content accessible currently requires many complicated and only partially-successful work-arounds, such as:</p>
        <ul>
          <li>Observing and moving ARIA-related attributes across elements (for role, etc.)</li>
          <li>Using non-standard attributes for ARIA features, in order to apply them to elements in a shadow root.</li>
          <li>Requiring that custom elements users wrap/slot elements so that ARIA attributes can be placed directly on them. This gets very complicated as the number of slotted inputs and levels of shadow root nesting increase.</li>
          <li>Duplicating nodes across shadow root boundaries</li>
          <li>Abandoning Shadow DOM</li>
        </ul>
      </section>
    </section>
    <section>
      <h2>Feature or Problem</h2>
      <dl>
        <dt>GitHub Issue(s):</dt>
        <dd>---</dd>
        <dt>Priority:</dt>
        <dd>---</dd>
        <dt>Status:</dt>
        <dd>---</dd>
      </dl>
      <section>
        <h3>Description</h3>
        <p>---</p>
      </section>
      <section>
        <h3>Motivation</h3>
        <p>---</p>
      </section>
    </section>
    <section id="conformance">
      <p>
        This is required for specifications that contain normative material.
      </p>
    </section>
    <section id="index"></section>
  </body>
</html>
