<!DOCTYPE html><html lang="en" dir="ltr"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 34.1.6">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
    
    
<title>Web Components Community Group: 2022 Spec/API status</title>
    
    
  
<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
<style>
ul.index{columns:30ch;column-gap:1.5em}
ul.index li{list-style:inherit}
ul.index li span{color:inherit;cursor:pointer;white-space:normal}
#index-defined-here ul.index li{font-size:.9rem}
ul.index code{color:inherit}
#index-defined-here .print-only{display:none}
@media print{
#index-defined-here .print-only{display:initial}
}
</style>
<meta name="description" content="This is required.">
<style>
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "specStatus": "CG-DRAFT",
  "latestVersion": null,
  "edDraftURI": null,
  "editors": [
    {
      "name": "Westbrook Johnson",
      "url": "https://westbrookjohnson.com"
    },
    {
      "name": "Alan Dávalos",
      "url": "https://github.com/alangdm"
    },
    {
      "name": "Rob Eisenberg",
      "url": "https://github.com/eisenbergeffect"
    },
    {
      "name": "Owen Buckley",
      "url": "https://github.com/thescientist13"
    },
    {
      "name": "Caleb Williams",
      "url": "https://github.com/calebdwilliams"
    },
    {
      "name": "Justin Fagnani",
      "url": "https://github.com/justinfagnani"
    }
  ],
  "github": "w3c/webcomponents-cg",
  "shortName": "webcomponents-cg",
  "xref": "web-platform",
  "group": "webcomponents",
  "tocIntroductory": true,
  "publishISODate": "2023-09-11T00:00:00.000Z",
  "generatedSubtitle": "Draft Community Group Report 11 September 2023"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/cg-draft"></head>
  <body class="h-entry toc-inline" data-cite="HTML INFRA URL WEBIDL DOM FETCH"><div class="head">
    
    <h1 id="title" class="title">Web Components Community Group: 2022 Spec/API status</h1> 
    <p id="w3c-state">
      <a href="https://www.w3.org/standards/types#reports">Draft Community Group Report</a>
      <time class="dt-published" datetime="2023-09-11">11 September 2023</time>
    </p>
    <dl>
      
      <dt>Latest published version:</dt><dd>
              none
            </dd>
      
      
      
      
      
      <dt>Editors:</dt><dd class="editor p-author h-card vcard">
    <a class="u-url url p-name fn" href="https://westbrookjohnson.com">Westbrook Johnson</a>
  </dd><dd class="editor p-author h-card vcard">
    <a class="u-url url p-name fn" href="https://github.com/alangdm">Alan Dávalos</a>
  </dd><dd class="editor p-author h-card vcard">
    <a class="u-url url p-name fn" href="https://github.com/eisenbergeffect">Rob Eisenberg</a>
  </dd><dd class="editor p-author h-card vcard">
    <a class="u-url url p-name fn" href="https://github.com/thescientist13">Owen Buckley</a>
  </dd><dd class="editor p-author h-card vcard">
    <a class="u-url url p-name fn" href="https://github.com/calebdwilliams">Caleb Williams</a>
  </dd><dd class="editor p-author h-card vcard">
    <a class="u-url url p-name fn" href="https://github.com/justinfagnani">Justin Fagnani</a>
  </dd>
      
      
      <dt>Feedback:</dt><dd>
        <a href="https://github.com/w3c/webcomponents-cg/">GitHub w3c/webcomponents-cg</a>
        (<a href="https://github.com/w3c/webcomponents-cg/pulls/">pull requests</a>,
        <a href="https://github.com/w3c/webcomponents-cg/issues/new/choose">new issue</a>,
        <a href="https://github.com/w3c/webcomponents-cg/issues/">open issues</a>)
      </dd>
      
    </dl>
    
    <p class="copyright">
          <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
          ©
          2023
          
          the Contributors to the Web Components Community Group: 2022 Spec/API status
          Specification, published by the
          <a href="https://www.w3.org/groups/cg/webcomponents">Web Components Community Group</a> under the
          <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable
                <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a>
                is available.
              
        </p>
    <hr title="Separator for header">
  </div>
    <section id="abstract" class="introductory"><h2>Abstract</h2>
      <p>This is required.</p>
    </section>
    <section id="sotd" class="introductory"><h2>Status of This Document</h2><p>
      This specification was published by the
      <a href="https://www.w3.org/groups/cg/webcomponents">Web Components Community Group</a>. It is not a W3C Standard nor is it
      on the W3C Standards Track.
      
            Please note that under the
            <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>
            there is a limited opt-out and other conditions apply.
          
      Learn more about
      <a href="https://www.w3.org/community/">W3C Community and Business Groups</a>.
    </p>
      <p>This is required.</p>
    <p>
    <a href="https://github.com/w3c/webcomponents-cg/issues/">GitHub Issues</a> are preferred for
          discussion of this specification.
        
    
  </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents-0">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#browser-parity"><bdi class="secno">1.1 </bdi>Browser Parity</a></li><li class="tocline"><a class="tocxref" href="#spec-alignment"><bdi class="secno">1.2 </bdi>Spec Alignment</a></li><li class="tocline"><a class="tocxref" href="#table-of-contents"><bdi class="secno">1.3 </bdi>Table of Contents</a></li></ol></li><li class="tocline"><a class="tocxref" href="#children-changed-callback"><bdi class="secno">2. </bdi>Children changed callback</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links"><bdi class="secno">2.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description"><bdi class="secno">2.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status"><bdi class="secno">2.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal"><bdi class="secno">2.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios"><bdi class="secno">2.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns"><bdi class="secno">2.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion"><bdi class="secno">2.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs"><bdi class="secno">2.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions"><bdi class="secno">2.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#composed-selection"><bdi class="secno">3. </bdi>Composed Selection</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-0"><bdi class="secno">3.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-0"><bdi class="secno">3.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-0"><bdi class="secno">3.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-0"><bdi class="secno">3.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-0"><bdi class="secno">3.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-0"><bdi class="secno">3.6 </bdi>Concerns</a></li></ol></li><li class="tocline"><a class="tocxref" href="#constructable-stylesheets-adoptedstylesheets"><bdi class="secno">4. </bdi>Constructable Stylesheets &amp; adoptedStyleSheets</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-1"><bdi class="secno">4.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-1"><bdi class="secno">4.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-1"><bdi class="secno">4.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-1"><bdi class="secno">4.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-1"><bdi class="secno">4.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-1"><bdi class="secno">4.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-0"><bdi class="secno">4.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-0"><bdi class="secno">4.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-0"><bdi class="secno">4.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#cross-root-aria"><bdi class="secno">5. </bdi>Cross-root ARIA</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-2"><bdi class="secno">5.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-2"><bdi class="secno">5.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-2"><bdi class="secno">5.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-2"><bdi class="secno">5.4 </bdi>Initial API Summary/Quick API Proposal</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#delegation-api"><bdi class="secno">5.4.1 </bdi>Delegation API</a></li><li class="tocline"><a class="tocxref" href="#reflection-api"><bdi class="secno">5.4.2 </bdi>Reflection API</a></li></ol></li><li class="tocline"><a class="tocxref" href="#key-scenarios-2"><bdi class="secno">5.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#related-specs-1"><bdi class="secno">5.6 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-1"><bdi class="secno">5.7 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#css-module-scripts"><bdi class="secno">6. </bdi>CSS Module Scripts</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-3"><bdi class="secno">6.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-3"><bdi class="secno">6.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-3"><bdi class="secno">6.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-3"><bdi class="secno">6.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-3"><bdi class="secno">6.5 </bdi>Key Scenarios</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#motivation"><bdi class="secno">6.5.1 </bdi>Motivation</a></li></ol></li><li class="tocline"><a class="tocxref" href="#concerns-2"><bdi class="secno">6.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-1"><bdi class="secno">6.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-2"><bdi class="secno">6.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-2"><bdi class="secno">6.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#css-properties-and-values-inside-shadow-root"><bdi class="secno">7. </bdi>CSS Properties and values inside shadow root</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-4"><bdi class="secno">7.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-4"><bdi class="secno">7.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-4"><bdi class="secno">7.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-4"><bdi class="secno">7.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-4"><bdi class="secno">7.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-3"><bdi class="secno">7.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-2"><bdi class="secno">7.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-3"><bdi class="secno">7.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-3"><bdi class="secno">7.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#custom-attributes"><bdi class="secno">8. </bdi>Custom Attributes</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-5"><bdi class="secno">8.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-5"><bdi class="secno">8.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-5"><bdi class="secno">8.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-5"><bdi class="secno">8.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-5"><bdi class="secno">8.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-4"><bdi class="secno">8.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-3"><bdi class="secno">8.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-4"><bdi class="secno">8.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-4"><bdi class="secno">8.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#custom-css-state"><bdi class="secno">9. </bdi>Custom CSS State</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-6"><bdi class="secno">9.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-6"><bdi class="secno">9.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-6"><bdi class="secno">9.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-6"><bdi class="secno">9.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-6"><bdi class="secno">9.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-5"><bdi class="secno">9.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#related-specs-5"><bdi class="secno">9.7 </bdi>Related Specs</a></li></ol></li><li class="tocline"><a class="tocxref" href="#declarative-css-modules"><bdi class="secno">10. </bdi>Declarative CSS Modules</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-7"><bdi class="secno">10.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-7"><bdi class="secno">10.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-7"><bdi class="secno">10.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-7"><bdi class="secno">10.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-7"><bdi class="secno">10.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-6"><bdi class="secno">10.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-4"><bdi class="secno">10.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-6"><bdi class="secno">10.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-5"><bdi class="secno">10.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#declarative-custom-elements"><bdi class="secno">11. </bdi>Declarative custom elements</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-8"><bdi class="secno">11.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-8"><bdi class="secno">11.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-8"><bdi class="secno">11.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-8"><bdi class="secno">11.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-8"><bdi class="secno">11.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-7"><bdi class="secno">11.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-5"><bdi class="secno">11.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-7"><bdi class="secno">11.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-6"><bdi class="secno">11.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#declarative-shadow-dom"><bdi class="secno">12. </bdi>Declarative Shadow DOM</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-9"><bdi class="secno">12.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-9"><bdi class="secno">12.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-9"><bdi class="secno">12.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-9"><bdi class="secno">12.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-9"><bdi class="secno">12.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-8"><bdi class="secno">12.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-6"><bdi class="secno">12.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-8"><bdi class="secno">12.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-7"><bdi class="secno">12.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#dom-parts"><bdi class="secno">13. </bdi>DOM Parts</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-10"><bdi class="secno">13.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-10"><bdi class="secno">13.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-10"><bdi class="secno">13.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-10"><bdi class="secno">13.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-10"><bdi class="secno">13.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-9"><bdi class="secno">13.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-7"><bdi class="secno">13.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-9"><bdi class="secno">13.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-8"><bdi class="secno">13.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#form-associated-custom-elements"><bdi class="secno">14. </bdi>Form-Associated Custom Elements</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-11"><bdi class="secno">14.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-11"><bdi class="secno">14.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-11"><bdi class="secno">14.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-11"><bdi class="secno">14.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-11"><bdi class="secno">14.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-10"><bdi class="secno">14.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#related-specs-10"><bdi class="secno">14.7 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-9"><bdi class="secno">14.8 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#html-modules"><bdi class="secno">15. </bdi>HTML modules</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-12"><bdi class="secno">15.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-12"><bdi class="secno">15.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-12"><bdi class="secno">15.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-12"><bdi class="secno">15.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-12"><bdi class="secno">15.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-11"><bdi class="secno">15.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-8"><bdi class="secno">15.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-11"><bdi class="secno">15.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-10"><bdi class="secno">15.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#imperative-slot-assignment"><bdi class="secno">16. </bdi>Imperative Slot Assignment</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-13"><bdi class="secno">16.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-13"><bdi class="secno">16.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-13"><bdi class="secno">16.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-13"><bdi class="secno">16.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-13"><bdi class="secno">16.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-12"><bdi class="secno">16.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-9"><bdi class="secno">16.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-12"><bdi class="secno">16.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-11"><bdi class="secno">16.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#lazy-custom-element-definitions"><bdi class="secno">17. </bdi>Lazy custom element definitions</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-14"><bdi class="secno">17.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-14"><bdi class="secno">17.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-14"><bdi class="secno">17.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-14"><bdi class="secno">17.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-14"><bdi class="secno">17.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-13"><bdi class="secno">17.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-10"><bdi class="secno">17.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-13"><bdi class="secno">17.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-12"><bdi class="secno">17.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#open-styling-of-shadow-roots"><bdi class="secno">18. </bdi>Open styling of shadow roots</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-15"><bdi class="secno">18.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-15"><bdi class="secno">18.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-15"><bdi class="secno">18.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-15"><bdi class="secno">18.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-15"><bdi class="secno">18.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-14"><bdi class="secno">18.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-11"><bdi class="secno">18.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-14"><bdi class="secno">18.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-13"><bdi class="secno">18.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#scoped-element-registries"><bdi class="secno">19. </bdi>Scoped Element Registries</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-16"><bdi class="secno">19.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-16"><bdi class="secno">19.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-16"><bdi class="secno">19.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-16"><bdi class="secno">19.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-16"><bdi class="secno">19.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-15"><bdi class="secno">19.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-12"><bdi class="secno">19.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-15"><bdi class="secno">19.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-14"><bdi class="secno">19.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#styling-children-of-slotted-content"><bdi class="secno">20. </bdi>Styling children of slotted content</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-17"><bdi class="secno">20.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-17"><bdi class="secno">20.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-17"><bdi class="secno">20.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-17"><bdi class="secno">20.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-17"><bdi class="secno">20.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-16"><bdi class="secno">20.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-13"><bdi class="secno">20.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-16"><bdi class="secno">20.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-15"><bdi class="secno">20.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#theming"><bdi class="secno">21. </bdi>Theming</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-18"><bdi class="secno">21.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-18"><bdi class="secno">21.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-18"><bdi class="secno">21.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-18"><bdi class="secno">21.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-18"><bdi class="secno">21.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-17"><bdi class="secno">21.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-14"><bdi class="secno">21.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-17"><bdi class="secno">21.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-16"><bdi class="secno">21.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#feature-or-problem"><bdi class="secno">22. </bdi>Feature or Problem</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#links-19"><bdi class="secno">22.1 </bdi>Links</a></li><li class="tocline"><a class="tocxref" href="#description-19"><bdi class="secno">22.2 </bdi>Description</a></li><li class="tocline"><a class="tocxref" href="#status-19"><bdi class="secno">22.3 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#initial-api-summary-quick-api-proposal-19"><bdi class="secno">22.4 </bdi>Initial API Summary/Quick API Proposal</a></li><li class="tocline"><a class="tocxref" href="#key-scenarios-19"><bdi class="secno">22.5 </bdi>Key Scenarios</a></li><li class="tocline"><a class="tocxref" href="#concerns-18"><bdi class="secno">22.6 </bdi>Concerns</a></li><li class="tocline"><a class="tocxref" href="#dissenting-opinion-15"><bdi class="secno">22.7 </bdi>Dissenting Opinion</a></li><li class="tocline"><a class="tocxref" href="#related-specs-18"><bdi class="secno">22.8 </bdi>Related Specs</a></li><li class="tocline"><a class="tocxref" href="#open-questions-17"><bdi class="secno">22.9 </bdi>Open Questions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">23. </bdi>Conformance</a></li><li class="tocline"><a class="tocxref" href="#index"><bdi class="secno">A. </bdi>Index</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#index-defined-here"><bdi class="secno">A.1 </bdi>Terms defined by this specification</a></li><li class="tocline"><a class="tocxref" href="#index-defined-elsewhere"><bdi class="secno">A.2 </bdi>Terms defined by reference</a></li></ol></li></ol></nav>
    <section class="informative" id="introduction"><div class="header-wrapper"><h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a></div><p><em>This section is non-normative.</em></p>
      
      <p>The initial slate of APIs that browsers shipped with web components "v1" left many important features and use-cases on a future to-do list, to be finalized out after the core custom element and shadow DOM features landed. While the web components GitHub issues and face-to-face meets have tracked and discussed many of these features individually, there hasn't been a comprehensive overview of what's left to "finish" web components.</p>
      <p>This document tries to highlight the main features that are lacking from the web components spec that either block adoption for more developers and frameworks, or cause pain points for existing developers.</p>
      <p>It's worth noting that many of these pain points are directly related to Shadow DOM's encapsulation. While there are many benefits to some types of widely shared components to strong encapsulation, the friction of strong encapsulation has prevented most developers from adopting Shadow DOM, to the point of there being alternate proposals for style scoping that don't use Shadow DOM. We urge browser vendors to recognize these barriers and work to make Shadow DOM more usable by more developers.</p>
      <section id="browser-parity"><div class="header-wrapper"><h3 id="x1-1-browser-parity"><bdi class="secno">1.1 </bdi>Browser Parity</h3><a class="self-link" href="#browser-parity" aria-label="Permalink for Section 1.1"></a></div>
        
        <p>We noticed the following specs already have a high degree of alignment from an implementation perspective, but support in browsers is still not equally distributed.  Filling in these gaps would be a big win for users and developers alike for a more predictable web.</p>
        <ul>
          <li><a href="#form-associated-custom-elements">FACE (Form-Associated Custom Elements)</a></li>
          <li><a href="#constructable-stylesheets-adoptedstylesheets">Constructable Style Sheets</a></li>
          <li><a href="#css-module-scripts">CSS Modules</a></li>
          <li><a href="#imperative-slot-assignment">Imperative slots</a></li>
        </ul>
      </section>
      <section id="spec-alignment"><div class="header-wrapper"><h3 id="x1-2-spec-alignment"><bdi class="secno">1.2 </bdi>Spec Alignment</h3><a class="self-link" href="#spec-alignment" aria-label="Permalink for Section 1.2"></a></div>
        
        <p>The following specs we see as highly valuable to the developer community for being able to deliver great web experiences to users when using Web Components.  As it pertains to topics like Aria and SSR, these specs just need a little more alignment across browser implementors so that consensus can be achieved.</p>
        <ul>
          <li><a href="#cross-root-aria">Cross-root Aria</a></li>
          <li><a href="#scoped-element-registries">Scoped Registries</a></li>
          <li><a href="#declarative-shadow-dom">Declarative Shadow DOM</a></li>
        </ul>
      </section>
      <section id="table-of-contents"><div class="header-wrapper"><h3 id="x1-3-table-of-contents"><bdi class="secno">1.3 </bdi>Table of Contents</h3><a class="self-link" href="#table-of-contents" aria-label="Permalink for Section 1.3"></a></div>
        
        <table>
          <thead>
            <tr>
              <th>Feature or Problem</th>
              <th>GitHub Issue(s)</th>
              <th>Status(?)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th><a href="#children-changed-callback">Children changed callback</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/809">WICG/webcomponents#809</a></td>
              <td>Uncertain</td>
            </tr>
            <tr>
              <th><a href="#composed-selection">Composed Selection</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/79">WICG/webcomponents#79</a></td>
              <td>Partial consensus, divergent partial implementations</td>
            </tr>
            <tr>
              <th><a href="#constructable-stylesheets-adoptedstylesheets">Constructable Stylesheets &amp; adoptedStyleSheets</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/169">WICG/webcomponents#468</a></td>
              <td>Some implementation</td>
            </tr>
            <tr>
              <th><a href="#cross-root-aria">Cross-root ARIA</a></th>
              <td>
                <a href="https://github.com/WICG/aom/issues/169">WICG/aom#169</a><br>
                <a href="https://github.com/WICG/aom/issues/107">WICG/aom#107</a><br>
                <a href="https://github.com/WICG/webcomponents/issues/917">WICG/webcomponents#917</a><br>
                <a href="https://github.com/WICG/webcomponents/issues/916">WICG/webcomponents#916</a>
              </td>
              <td>Uncertain</td>
            </tr>
            <tr>
              <th><a href="#css-module-scripts">CSS Module Scripts</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/759">WICG/webcomponents#759</a></td>
              <td>Some implementation</td>
            </tr>
            <tr>
              <th><a href="#css-properties-and-values-inside-shadow-root">CSS Properties and values inside shadow root</a></th>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <th><a href="#custom-attributes">Custom Attributes</a></th>
              <td><a href="https://github.com/w3c/webcomponents-cg/discussions/31#discussioncomment-3163644">Web Components CG Discussion</a></td>
              <td>Not addressed</td>
            </tr>
            <tr>
              <th><a href="#custom-css-state">Custom CSS State</a></th>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <th><a href="#declarative-css-modules">Declarative CSS Modules</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/939">WICG/webcomponents#939</a></td>
              <td>Not Addressed</td>
            </tr>
            <tr>
              <th><a href="#declarative-custom-elements">Declarative custom elements</a></th>
              <td><a href="https://github.com/WICG/webcomponents/blob/gh-pages/proposals/Declarative-Custom-Elements-Strawman.md">Strawperson</a></td>
              <td>Not addressed</td>
            </tr>
            <tr>
              <th><a href="#declarative-shadow-dom">Declarative Shadow DOM</a></th>
              <td><a href="https://github.com/whatwg/dom/issues/831">whatwg/dom#831</a></td>
              <td>Partial consensus, some implementation</td>
            </tr>
            <tr>
              <th><a href="#dom-parts">DOM Parts</a></th>
              <td><a href="https://github.com/WICG/webcomponents/blob/gh-pages/proposals/DOM-Parts.md">DOM Part API - First Step of Template Instantiation</a></td>
              <td>Uncertain</td>
            </tr>
            <tr>
              <th><a href="#form-associated-custom-elements">Form-Associated Custom Elements</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/187">WICG/webcomponents#187</a></td>
              <td>Some implementation</td>
            </tr>
            <tr>
              <th><a href="#html-modules">HTML modules</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/645">WICG/webcomponents#645</a></td>
              <td>Partial consensus, no implementations</td>
            </tr>
            <tr>
              <th><a href="#imperative-slot-assignment">Imperative Slot Assignment</a></th>
              <td><a href="https://github.com/whatwg/html/issues/3534" target="_blank">whatwg/html#3534</a></td>
              <td>Partial Implementation</td>
            </tr>
            <tr>
              <th><a href="#lazy-custom-element-definitions">Lazy custom element definitions</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/782">WICG/webcomponents#782</a></td>
              <td>Uncertain</td>
            </tr>
            <tr>
              <th><a href="#open-styling-of-shadow-roots">Open styling of shadow roots</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/909">WICG/webcomponents#909</a></td>
              <td>Not addressed</td>
            </tr>
            <tr>
              <th><a href="#scoped-element-registries">Scoped Element Registries</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/716">WICG/webcomponents#716</a></td>
              <td>Consensus</td>
            </tr>
            <tr>
              <th><a href="#styling-children-of-slotted-content">Styling children of slotted content</a></th>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <th><a href="#theming">Theming</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/864">WICG/webcomponents#864</a></td>
              <td>Uncertain</td>
            </tr>
            <tr>
              <th>---</th>
              <td>---</td>
              <td>---</td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
    <section id="children-changed-callback"><div class="header-wrapper"><h2 id="x2-children-changed-callback"><bdi class="secno">2. </bdi>Children changed callback</h2><a class="self-link" href="#children-changed-callback" aria-label="Permalink for Section 2."></a></div>
      
      <section id="links"><div class="header-wrapper"><h3 id="x2-1-links"><bdi class="secno">2.1 </bdi>Links</h3><a class="self-link" href="#links" aria-label="Permalink for Section 2.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/2021.html#children-changed-callback">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd>
            <ul>
              <li><a href="https://github.com/WICG/webcomponents/issues/809">2019 discussion - open</a></li>
              <li><a href="https://github.com/WICG/webcomponents/issues/619">December 2016 discussion - closed</a></li>
              <li><a href="https://github.com/WICG/webcomponents/issues/551">August 2016 discussion regarding parsing timing - closed</a></li>
              <li><a href="https://github.com/WICG/webcomponents/issues/550">August 2016 discussion - closed</a></li>
            </ul>
          </dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
          <dt>Polyfills/Libraries</dt>
          <dd><a href="https://github.com/WebReflection/html-parsed-element"> For the parsing behavior</a></dd>
        </dl>
      </section>
      <section id="description"><div class="header-wrapper"><h3 id="x2-2-description"><bdi class="secno">2.2 </bdi>Description</h3><a class="self-link" href="#description" aria-label="Permalink for Section 2.2"></a></div>
        
        <p>Provide a callback that triggers whenever the parser finishes parsing children or when a new child is inserted or an old child is removed.</p>
      </section>
      <section id="status"><div class="header-wrapper"><h3 id="x2-3-status"><bdi class="secno">2.3 </bdi>Status</h3><a class="self-link" href="#status" aria-label="Permalink for Section 2.3"></a></div>
        
        <ul>
          <li>Uncertain - no concrete proposal or consensus on spec</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal"><div class="header-wrapper"><h3 id="x2-4-initial-api-summary-quick-api-proposal"><bdi class="secno">2.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal" aria-label="Permalink for Section 2.4"></a></div>
        
        <p>No concrete API proposal exists so far but the discussions seem to refer to using the callback similar to the attributeChangedCallback.</p>
        <p>A component using said callback would look like this:</p>
        <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChildrenChangedCallbackSample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>{
  <span class="hljs-function"><span class="hljs-title">childrenChangedCallback</span>(<span class="hljs-params"></span>)</span> {}
}</code></pre>
      </section>
      <section id="key-scenarios"><div class="header-wrapper"><h3 id="x2-5-key-scenarios"><bdi class="secno">2.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios" aria-label="Permalink for Section 2.5"></a></div>
        
        <ul>
          <li><strong>Children parsed</strong>: This proposal would act as a cross-browser method of detecting when a custom element's children have been fully parsed reliably.</li>
          <li><strong>Children inserted/removed</strong>: This proposal would provide better ergonomics to react to insertion or removal of children nodes than using a MutationObserver.</li>
        </ul>
      </section>
      <section id="concerns"><div class="header-wrapper"><h3 id="x2-6-concerns"><bdi class="secno">2.6 </bdi>Concerns</h3><a class="self-link" href="#concerns" aria-label="Permalink for Section 2.6"></a></div>
        
        <ul>
          <li>Too expensive to implement: this is no longer the case, all engines have mechanisms for this already</li>
          <li>The addition of the parsing behavior might encourage assuming a set of initial children exists and not reacting to changes in them.</li>
        </ul>
      </section>
      <section id="dissenting-opinion"><div class="header-wrapper"><h3 id="x2-7-dissenting-opinion"><bdi class="secno">2.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion" aria-label="Permalink for Section 2.7"></a></div>
        
        <ul>
          <li>Some people believe using a MutationObserver is enough to cover the insertion/removal cases and want to avoid creating a duplicate similar API for custom elements. But the async nature of MutationObserver seems to cause timing issues.</li>
          <li>Some other people don't want to add this API if it will only cover the use case when the parser finishes parsing children. (See the second concern)</li>
        </ul>
      </section>
      <section id="related-specs"><div class="header-wrapper"><h3 id="x2-8-related-specs"><bdi class="secno">2.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs" aria-label="Permalink for Section 2.8"></a></div>
        
        <ul>
          <li><a href="https://github.com/WICG/webcomponents/issues/933">slotchange event options</a></li>
        </ul>
      </section>
      <section id="open-questions"><div class="header-wrapper"><h3 id="x2-9-open-questions"><bdi class="secno">2.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions" aria-label="Permalink for Section 2.9"></a></div>
        
        <ul>
          <li>Should this API really cover both use cases to begin with? Arguments for both sides have been mentioned in all referenced discussions with no conclusion</li>
          <li>Should this be one or two separate callback functions?</li>
          <li>Would it be better to implement this behavior as <a href="https://github.com/WICG/webcomponents/issues/933">part of the slotchange event as suggested in this other issue</a>? This might lead to engine security bugs so the callback seems a better option in that regard.</li>
        </ul>
      </section>
    </section>
    <section id="composed-selection"><div class="header-wrapper"><h2 id="x3-composed-selection"><bdi class="secno">3. </bdi>Composed Selection</h2><a class="self-link" href="#composed-selection" aria-label="Permalink for Section 3."></a></div>
      
      <section id="links-0"><div class="header-wrapper"><h3 id="x3-1-links"><bdi class="secno">3.1 </bdi>Links</h3><a class="self-link" href="#links-0" aria-label="Permalink for Section 3.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/2021.html#composed-selection">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/WICG/webcomponents/issues/79">Selection APIs for Shadow DOM (main issue)</a></dd>
          <dd><a href="https://github.com/w3c/selection-api/issues/98">Add getComposedRange to Selection</a></dd>
          <dd><a href="https://github.com/w3c/selection-api/issues/99">Change setBaseAndExtent</a></dd>
          <dt>Browser positions:</dt>
          <dd><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1430308">Mozilla open bug: Implement Selection.getComposedRange()</a></dd>
          <dd><a href="https://bugs.webkit.org/show_bug.cgi?id=163921">Webkit open bug: Add selection API that works across shadow boundaries</a></dd>
        </dl>
      </section>
      <section id="description-0"><div class="header-wrapper"><h3 id="x3-2-description"><bdi class="secno">3.2 </bdi>Description</h3><a class="self-link" href="#description-0" aria-label="Permalink for Section 3.2"></a></div>
        
        <p>
          Since existing Selection APIs can represent only a single selection in a document,
          bound to a single Range,
          the need for an API to represent ranges over a composed tree has been generally acknowledged since at least 2015.
        </p><p>
          This introduces a new API,
          <code>getComposedRange()</code>, that can return a <code>StaticRange</code> with endpoints in different shadow trees.
          It modifies several existing selection APIs,
          like <code>setBaseAndExtent()</code>,
          to support composed trees in a backwards-compatible way.
        </p>
        <p>
          It also specifies a consistent behavior for <code>getSelection()</code>,
          which currently behaves differently across browsers when applied to a shadow root.
        </p>
      </section>
      <section id="status-0"><div class="header-wrapper"><h3 id="x3-3-status"><bdi class="secno">3.3 </bdi>Status</h3><a class="self-link" href="#status-0" aria-label="Permalink for Section 3.3"></a></div>
        
        <ul>
          <li>
            Consensus on
            <a href="https://github.com/mfreed7/shadow-dom-selection/blob/main/README.md">The Shadow Selection API</a>,
            but no spec or implementations.
          </li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-0"><div class="header-wrapper"><h3 id="x3-4-initial-api-summary-quick-api-proposal"><bdi class="secno">3.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-0" aria-label="Permalink for Section 3.4"></a></div>
        
        <pre aria-busy="false"><code class="hljs javascript">customElements.define(<span class="hljs-string">'x-editor'</span>, <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>{
  <span class="hljs-function"><span class="hljs-title">connectedCallback</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-built_in">super</span>.connectedCallback();
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'selectionchange'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> selection = <span class="hljs-built_in">window</span>.getSelection();
      <span class="hljs-keyword">const</span> range = selection.getComposedRange({ <span class="hljs-attr">shadowRoots</span>: [ <span class="hljs-built_in">this</span>.shadowRoot ] });
      <span class="hljs-comment">// use shadow-aware `range` to evaluate selection within this component</span>
    })
  }
});</code></pre>
      </section>
      <section id="key-scenarios-0"><div class="header-wrapper"><h3 id="x3-5-key-scenarios"><bdi class="secno">3.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-0" aria-label="Permalink for Section 3.5"></a></div>
        
        <p>
          Selection does not work across or within shadow roots.
          <strong>This makes fully-featured rich-text editors impossible to implement with web components.</strong>
          Some of the web's most popular editors have issues that are blocked on this functionality:
        </p>
        <ul>
          <li><a href="https://github.com/tinymce/tinymce/pull/4737#issuecomment-719317085">TinyMCE</a></li>
          <li><a href="https://github.com/ckeditor/ckeditor5/pull/7846#issuecomment-675477977">CKEditor</a></li>
          <li><a href="https://github.com/quilljs/quill/pull/1805">Quill</a></li>
        </ul>
      </section>
      <section id="concerns-0"><div class="header-wrapper"><h3 id="x3-6-concerns"><bdi class="secno">3.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-0" aria-label="Permalink for Section 3.6"></a></div>
        
        <ul>
          <li>
            Aligning all browsers behind a spec will change behavior in the wild
            in any cases where cross-tree nodes are already being used.
            However, since cross-root selection behavior is currently unspecified
            and works differently in every browser,
            the impact of this is expected to be small.
          </li>
        </ul>
      </section>
    </section>
    <section id="constructable-stylesheets-adoptedstylesheets"><div class="header-wrapper"><h2 id="x4-constructable-stylesheets-adoptedstylesheets"><bdi class="secno">4. </bdi>Constructable Stylesheets &amp; adoptedStyleSheets</h2><a class="self-link" href="#constructable-stylesheets-adoptedstylesheets" aria-label="Permalink for Section 4."></a></div>
      
      <section id="links-1"><div class="header-wrapper"><h3 id="x4-1-links"><bdi class="secno">4.1 </bdi>Links</h3><a class="self-link" href="#links-1" aria-label="Permalink for Section 4.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/2021.html#constructable-stylesheets-adoptedstylesheets">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/WICG/webcomponents/issues/468">WICG/webcomponents#468</a></dd>
          <dt>Browser positions:</dt>
          <dd><a href="https://chromestatus.com/feature/5394843094220800" target="_blank">Chrome (Shipped)</a></dd>
          <dd><a href="https://github.com/mozilla/standards-positions/issues/103" target="_blank">Mozilla (Shipped)</a></dd>
          <dd><a href="https://github.com/WebKit/standards-positions/issues/42" target="_blank">Safari</a></dd>
        </dl>
      </section>
      <section id="description-1"><div class="header-wrapper"><h3 id="x4-2-description"><bdi class="secno">4.2 </bdi>Description</h3><a class="self-link" href="#description-1" aria-label="Permalink for Section 4.2"></a></div>
        
        <p><a href="https://wicg.github.io/construct-stylesheets/" target="_blank">Constructable Stylesheets</a> and adoptedStyleSheets enable adding styles directly to DOM trees, e.g. <code>document</code> and shadow roots, without creating new DOM elements. Because a single stylesheet object can be adopted by multiple scopes, it also allows sharing of styles that can be centrally modified.</p>
      </section>
      <section id="status-1"><div class="header-wrapper"><h3 id="x4-3-status"><bdi class="secno">4.3 </bdi>Status</h3><a class="self-link" href="#status-1" aria-label="Permalink for Section 4.3"></a></div>
        
        <ul>
          <li>Partial consensus; shipped in both <a href="https://web.dev/constructable-stylesheets/" target="_blank">Chrome</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1520690" target="_blank">Firefox</a></li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-1"><div class="header-wrapper"><h3 id="x4-4-initial-api-summary-quick-api-proposal"><bdi class="secno">4.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-1" aria-label="Permalink for Section 4.4"></a></div>
        
        <p>The following is <a href="https://web.dev/constructable-stylesheets/#using-constructed-stylesheets" target="_blank">an example</a> of what this would look like in practice.</p>
        <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">const</span> sheet = <span class="hljs-keyword">new</span> CSSStyleSheet();
sheet.replaceSync(<span class="hljs-string">'a { color: red; }'</span>);

<span class="hljs-comment">// Apply the stylesheet to a document:</span>
<span class="hljs-built_in">document</span>.adoptedStyleSheets = [sheet];

<span class="hljs-comment">// Apply the stylesheet to a Shadow Root:</span>
<span class="hljs-keyword">const</span> node = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>);
<span class="hljs-keyword">const</span> shadow = node.attachShadow({ <span class="hljs-attr">mode</span>: <span class="hljs-string">'open'</span> });
shadow.adoptedStyleSheets = [sheet];</code></pre>
      </section>
      <section id="key-scenarios-1"><div class="header-wrapper"><h3 id="x4-5-key-scenarios"><bdi class="secno">4.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-1" aria-label="Permalink for Section 4.5"></a></div>
        
        <ul>
          <li>There is no effective way to share styles across components while allowing them to be centrally modified.</li>
          <li>Creating <code>&lt;style&gt;</code> elements for each style used in each shadow root has a measurable performance overhead.</li>
          <li>CSS Module Scripts, another critical feature, depends on constructable stylesheets.</li>
        </ul>
      </section>
      <section id="concerns-1"><div class="header-wrapper"><h3 id="x4-6-concerns"><bdi class="secno">4.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-1" aria-label="Permalink for Section 4.6"></a></div>
        
        <p>From their standards position tracker, Safari has highlighted some of the following concerns:</p>
          <ul>
            <li>Issues related to <a href="https://github.com/WICG/construct-stylesheets/issues/45" target="_blank">race conditions</a> with adopting stylesheets and if the adoptedStyleSheets array should be directly mutable or not</li>
            <li>There is concern that it is <a href="https://github.com/whatwg/dom/pull/892#pullrequestreview-593774559" target="_blank">incompatible with Declarative Shadow DOM</a>.</li>
            <li>Outstanding questions around <a href="https://github.com/WICG/webcomponents/issues/870" target="_blank"><em>@import</em> statements in CSS Modules</a>.</li>
          </ul>
        <p></p>
      </section>
      <section id="dissenting-opinion-0"><div class="header-wrapper"><h3 id="x4-7-dissenting-opinion"><bdi class="secno">4.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-0" aria-label="Permalink for Section 4.7"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="related-specs-0"><div class="header-wrapper"><h3 id="x4-8-related-specs"><bdi class="secno">4.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-0" aria-label="Permalink for Section 4.8"></a></div>
        
        <ul>
          <li><a href="/#declarative-shadow-dom" target="_blank">Declarative Shadow DOM</a></li>
          <li><a href="/#css-module-scripts" target="_blank">CSS Module Scripts</a></li>
        </ul>
      </section>
      <section id="open-questions-0"><div class="header-wrapper"><h3 id="x4-9-open-questions"><bdi class="secno">4.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-0" aria-label="Permalink for Section 4.9"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
    </section>
    <section id="cross-root-aria"><div class="header-wrapper"><h2 id="x5-cross-root-aria"><bdi class="secno">5. </bdi>Cross-root ARIA</h2><a class="self-link" href="#cross-root-aria" aria-label="Permalink for Section 5."></a></div>
      
      <section id="links-2"><div class="header-wrapper"><h3 id="x5-1-links"><bdi class="secno">5.1 </bdi>Links</h3><a class="self-link" href="#links-2" aria-label="Permalink for Section 5.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/2021.html#cross-root-aria">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/leobalter/cross-root-aria-delegation" target="_blank">Cross-root ARIA Delegation</a></dd>
          <dd><a href="https://github.com/Westbrook/cross-root-aria-reflection" target="_blank">Cross-root ARIA Reflection</a></dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section id="description-2"><div class="header-wrapper"><h3 id="x5-2-description"><bdi class="secno">5.2 </bdi>Description</h3><a class="self-link" href="#description-2" aria-label="Permalink for Section 5.2"></a></div>
        
        <p>
          Shadow boundaries prevent content on either side of the boundary from referencing each other via ID references. ID references being the basis of the majority of the accessibility patters outlines by aria attributes, this causes a major issue in developing accessible content with shadow DOM. While there are ways to develop these UIs by orchestrating the relationships between elements of synthesizing the passing of content across a shadow boundary, these practices generally position accessible development out of reach for most developers, both at component creation and component consumption time.
        </p>
        <p>
          Developers of a custom element should be able to outline to browsers how content from outside of their shadow root realtes to the content within it and visa versa. Cross-root ARIA Delegation would allow developers to define how content on the outside is mapped to the content within a shadow root, while Cross-root ARIA Reflection would define how content within a shadow root was made available to content outside of it.
        </p>
      </section>
      <section id="status-2"><div class="header-wrapper"><h3 id="x5-3-status"><bdi class="secno">5.3 </bdi>Status</h3><a class="self-link" href="#status-2" aria-label="Permalink for Section 5.3"></a></div>
        
        <p>
          Implementors participating in bi-weekly Accessibility Object Model syncs with WICG have all been favorable to the delegation work and are interested in the reflection work as a tighly related API that maybe is a fast follower. Leo Balter is working on finalizing proposal text for the delegation API at which time Westbrook Johnson will apply similar teminology to the reflection API proposal.
        </p>
      </section>
      <section id="initial-api-summary-quick-api-proposal-2"><div class="header-wrapper"><h3 id="x5-4-initial-api-summary-quick-api-proposal"><bdi class="secno">5.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-2" aria-label="Permalink for Section 5.4"></a></div>
        
        <section id="delegation-api"><div class="header-wrapper"><h4 id="x5-4-1-delegation-api"><bdi class="secno">5.4.1 </bdi>Delegation API</h4><a class="self-link" href="#delegation-api" aria-label="Permalink for Section 5.4.1"></a></div>
        <p>HTML</p>
        <pre><code aria-busy="false" class="hljs xml">
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"foo"</span>&gt;</span>Description!<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"template1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"input"</span> <span class="hljs-attr">autoarialabel</span> <span class="hljs-attr">autoariadescribedby</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">autoarialabel</span>&gt;</span>Another target<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">x-foo</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Hello!"</span> <span class="hljs-attr">aria-describedby</span>=<span class="hljs-string">"foo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">x-foo</span>&gt;</span>
</code></pre>
        <p>JS</p>
        <pre><code aria-busy="false" class="hljs javascript">
  <span class="hljs-keyword">const</span> template = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'template1'</span>);

  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XFoo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>{
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> {
      <span class="hljs-built_in">super</span>();
      <span class="hljs-built_in">this</span>.attachShadow({ <span class="hljs-attr">mode</span>: <span class="hljs-string">"open"</span>, <span class="hljs-attr">delegatesAriaLabel</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">delegatesAriaDescribedBy</span>: <span class="hljs-literal">true</span> });
      <span class="hljs-built_in">this</span>.shadowRoot.appendChild(template.content.cloneNode(<span class="hljs-literal">true</span>));
    }
  }

  customElements.define(<span class="hljs-string">"x-foo"</span>, XFoo);
</code></pre>
        </section><section id="reflection-api"><div class="header-wrapper"><h4 id="x5-4-2-reflection-api"><bdi class="secno">5.4.2 </bdi>Reflection API</h4><a class="self-link" href="#reflection-api" aria-label="Permalink for Section 5.4.2"></a></div>
        <p>HTML</p>
        <pre><code aria-busy="false" class="hljs xml">
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">aria-controlls</span>=<span class="hljs-string">"foo"</span> <span class="hljs-attr">aria-activedescendent</span>=<span class="hljs-string">"foo"</span>&gt;</span>Description!<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"template1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">reflectariacontrols</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Item 1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">reflectariaactivedescendent</span>&gt;</span>Item 2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Item 3<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">x-foo</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"foo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">x-foo</span>&gt;</span>
</code></pre>
        <p>JS</p>
        <pre><code aria-busy="false" class="hljs javascript">
  <span class="hljs-keyword">const</span> template = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'template1'</span>);

  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XFoo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>{
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> {
      <span class="hljs-built_in">super</span>();
      <span class="hljs-built_in">this</span>.attachShadow({ <span class="hljs-attr">mode</span>: <span class="hljs-string">"open"</span>, <span class="hljs-attr">reflectsAriaControls</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">reflectsAriaActivedescendent</span>: <span class="hljs-literal">true</span> });
      <span class="hljs-built_in">this</span>.shadowRoot.appendChild(template.content.cloneNode(<span class="hljs-literal">true</span>));
    }
  }
  customElements.define(<span class="hljs-string">"x-foo"</span>, XFoo);
</code></pre>
      </section></section>
      <section id="key-scenarios-2"><div class="header-wrapper"><h3 id="x5-5-key-scenarios"><bdi class="secno">5.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-2" aria-label="Permalink for Section 5.5"></a></div>
        
        <p>When developing many of the patterns outlines in the <a href="https://www.w3.org/WAI/ARIA/apg/patterns/" target="_blank">ARIA Authoring Practices Guide</a> having this capability would allow for encapsulating responsibilities outlined by the <code>role</code> attribute in a shadow root.</p>
      </section>
      <section id="related-specs-1"><div class="header-wrapper"><h3 id="x5-6-related-specs"><bdi class="secno">5.6 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-1" aria-label="Permalink for Section 5.6"></a></div>
        
        <ul>
          <li><a href="https://github.com/WICG/aom" target="_blank">AOM</a></li>
          <li><a href="https://wicg.github.io/aom/aria-reflection-explainer.html" target="_blank">ARIA Reflection</a></li>
          <li><a href="https://github.com/WICG/aom/blob/gh-pages/element_reference_properties.md" target="_blank">Element reference DOM properties</a></li>
        </ul>
      </section>
      <section id="open-questions-1"><div class="header-wrapper"><h3 id="x5-7-open-questions"><bdi class="secno">5.7 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-1" aria-label="Permalink for Section 5.7"></a></div>
        
        <ul>
          <li>Should these two ideas can/should really ship separately? While the reflection API was ideated after the delegation API it may not be practical to separate them at the implementation/consumption level.</li>
          <li>Is <code>delegation</code> and <code>reflection</code> the right name for these APIs? Particularly, "reflection" is used in <a href="https://wicg.github.io/aom/aria-reflection-explainer.html" target="_blank">ARIA Reflection</a>.</li>
          <li>There are non-ARIA attributes that would benefit from being supported by these APIs. Should they be drafted in a more general way?</li>
        </ul>
      </section>
    </section>
    <section id="css-module-scripts"><div class="header-wrapper"><h2 id="x6-css-module-scripts"><bdi class="secno">6. </bdi>CSS Module Scripts</h2><a class="self-link" href="#css-module-scripts" aria-label="Permalink for Section 6."></a></div>
      
      <section id="links-3"><div class="header-wrapper"><h3 id="x6-1-links"><bdi class="secno">6.1 </bdi>Links</h3><a class="self-link" href="#links-3" aria-label="Permalink for Section 6.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/2021.html#css-module-scripts">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/WICG/webcomponents/issues/759">WICG/webcomponents#759</a></dd>
          <dt>Browser positions:</dt>
          <dd><a href="https://web.dev/css-module-scripts/">Chrome</a></dd>
          <dd><a href="https://mozilla.github.io/standards-positions/#import-attributes">Firefox</a></dd>
        </dl>
      </section>
      <section id="description-3"><div class="header-wrapper"><h3 id="x6-2-description"><bdi class="secno">6.2 </bdi>Description</h3><a class="self-link" href="#description-3" aria-label="Permalink for Section 6.2"></a></div>
        
        <p>CSS Module Scripts allow JavaScript modules to import style sheets. They can then be applied to a document or shadow root using adoptedStyleSheets in the same way as constructable style sheets.</p>
      </section>
      <section id="status-3"><div class="header-wrapper"><h3 id="x6-3-status"><bdi class="secno">6.3 </bdi>Status</h3><a class="self-link" href="#status-3" aria-label="Permalink for Section 6.3"></a></div>
        
        <ul>
          <li><a href="https://chromestatus.com/feature/5948572598009856">Chrome (shipped)</a></li>
          <li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1720570">Firefox</a></li>
          <li><a href="https://bugs.webkit.org/show_bug.cgi?id=227967">Safari</a></li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-3"><div class="header-wrapper"><h3 id="x6-4-initial-api-summary-quick-api-proposal"><bdi class="secno">6.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-3" aria-label="Permalink for Section 6.4"></a></div>
        
        <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">import</span> styleSheet <span class="hljs-keyword">from</span> <span class="hljs-string">"./styles.css"</span> assert { <span class="hljs-attr">type</span>: <span class="hljs-string">"css"</span> };

<span class="hljs-built_in">document</span>.adoptedStyleSheets = [ styleSheet ];</code></pre>
      </section>
      <section id="key-scenarios-3"><div class="header-wrapper"><h3 id="x6-5-key-scenarios"><bdi class="secno">6.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-3" aria-label="Permalink for Section 6.5"></a></div>
        
        <section id="motivation"><div class="header-wrapper"><h4 id="x6-5-1-motivation"><bdi class="secno">6.5.1 </bdi>Motivation</h4><a class="self-link" href="#motivation" aria-label="Permalink for Section 6.5.1"></a></div>
        <ul>
          <li>CSS modules will allow styles to be loaded in component definitions without adding <code>&lt;style&gt;</code> or <code>&lt;link&gt;</code> elements that need to be created in each element instance.</li>
          <li>Authors today often use inlined CSS strings in JS modules, but many of them want to move the CSS into separate .css files.</li>
          <li>Without CSS-in-JS it's difficult to ensure that CSS is loaded before the component is defined and rendered. CSS module scripts provide the same ordering guarantee.</li>
          <li>Component authors may need to import a resource that is only available as an external .css file, and don't have control over the resource to wrap it in a JS module.</li>
        </ul>
        <p>For further motivational details, see this explainer document: <a href="https://github.com/WICG/webcomponents/blob/gh-pages/proposals/css-modules-v1-explainer.md#why-are-css-modules-needed">webcomponents/css-modules-v1-explainer.md at gh-pages · WICG/webcomponents</a>.</p>
      </section></section>
      <section id="concerns-2"><div class="header-wrapper"><h3 id="x6-6-concerns"><bdi class="secno">6.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-2" aria-label="Permalink for Section 6.6"></a></div>
        
        <ul>
          <li>Safari has a security concern regarding <a href="https://github.com/w3ctag/design-reviews/issues/405#issuecomment-535478821">the result of a loaded module.</a></li>
          <li>Safari wants to better understand <a href="https://github.com/w3ctag/design-reviews/issues/405#issuecomment-561304217">how to handle <code>@import</code> statements in CSS Modules.</a></li>
        </ul>
      </section>
      <section id="dissenting-opinion-1"><div class="header-wrapper"><h3 id="x6-7-dissenting-opinion"><bdi class="secno">6.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-1" aria-label="Permalink for Section 6.7"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="related-specs-2"><div class="header-wrapper"><h3 id="x6-8-related-specs"><bdi class="secno">6.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-2" aria-label="Permalink for Section 6.8"></a></div>
        
        <ul>
          <li>This has a pre-requisite on <a href="#constructable-stylesheets-adoptedstylesheets">Constructable Stylesheets</a> landing.</li>
        </ul>
      </section>
      <section id="open-questions-2"><div class="header-wrapper"><h3 id="x6-9-open-questions"><bdi class="secno">6.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-2" aria-label="Permalink for Section 6.9"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
    </section>
    <section id="css-properties-and-values-inside-shadow-root"><div class="header-wrapper"><h2 id="x7-css-properties-and-values-inside-shadow-root"><bdi class="secno">7. </bdi>CSS Properties and values inside shadow root</h2><a class="self-link" href="#css-properties-and-values-inside-shadow-root" aria-label="Permalink for Section 7."></a></div>
      
      <section id="links-4"><div class="header-wrapper"><h3 id="x7-1-links"><bdi class="secno">7.1 </bdi>Links</h3><a class="self-link" href="#links-4" aria-label="Permalink for Section 7.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd>N/A</dd>
          <dt>GitHub issues:</dt>
          <dd>---</dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section id="description-4"><div class="header-wrapper"><h3 id="x7-2-description"><bdi class="secno">7.2 </bdi>Description</h3><a class="self-link" href="#description-4" aria-label="Permalink for Section 7.2"></a></div>
        
        <p>---</p>
      </section>
      <section id="status-4"><div class="header-wrapper"><h3 id="x7-3-status"><bdi class="secno">7.3 </bdi>Status</h3><a class="self-link" href="#status-4" aria-label="Permalink for Section 7.3"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-4"><div class="header-wrapper"><h3 id="x7-4-initial-api-summary-quick-api-proposal"><bdi class="secno">7.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-4" aria-label="Permalink for Section 7.4"></a></div>
        
        <p>Summary or proposal based on current status; paragraph(s) and code.</p>
      </section>
      <section id="key-scenarios-4"><div class="header-wrapper"><h3 id="x7-5-key-scenarios"><bdi class="secno">7.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-4" aria-label="Permalink for Section 7.5"></a></div>
        
        <p>---</p>
      </section>
      <section id="concerns-3"><div class="header-wrapper"><h3 id="x7-6-concerns"><bdi class="secno">7.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-3" aria-label="Permalink for Section 7.6"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="dissenting-opinion-2"><div class="header-wrapper"><h3 id="x7-7-dissenting-opinion"><bdi class="secno">7.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-2" aria-label="Permalink for Section 7.7"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="related-specs-3"><div class="header-wrapper"><h3 id="x7-8-related-specs"><bdi class="secno">7.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-3" aria-label="Permalink for Section 7.8"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="open-questions-3"><div class="header-wrapper"><h3 id="x7-9-open-questions"><bdi class="secno">7.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-3" aria-label="Permalink for Section 7.9"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
    </section>
    <section id="custom-attributes"><div class="header-wrapper"><h2 id="x8-custom-attributes"><bdi class="secno">8. </bdi>Custom Attributes</h2><a class="self-link" href="#custom-attributes" aria-label="Permalink for Section 8."></a></div>
      
      <section id="links-5"><div class="header-wrapper"><h3 id="x8-1-links"><bdi class="secno">8.1 </bdi>Links</h3><a class="self-link" href="#links-5" aria-label="Permalink for Section 8.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd>N/A</dd>
          <dt>GitHub issues:</dt>
          <dd>
            <ul>
              <li>
                <a href="https://github.com/w3c/webcomponents-cg/discussions/31#discussioncomment-3163644">Discussion</a>
              </li>
              <li>
                <a href="https://github.com/whatwg/html/issues/2271">Custom Attribute Name Rules</a>
              </li>
              <li>
                <a href="https://github.com/whatwg/dom/issues/533#issuecomment-405530738">Node Connectedness comment about Custom Attributes</a>
              </li>
            </ul>
          </dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section id="description-5"><div class="header-wrapper"><h3 id="x8-2-description"><bdi class="secno">8.2 </bdi>Description</h3><a class="self-link" href="#description-5" aria-label="Permalink for Section 8.2"></a></div>
        
        <p>Enable developers to create reusable custom behaviors that that can be declaratively applied to any element.</p>
      </section>
      <section id="status-5"><div class="header-wrapper"><h3 id="x8-3-status"><bdi class="secno">8.3 </bdi>Status</h3><a class="self-link" href="#status-5" aria-label="Permalink for Section 8.3"></a></div>
        
        <ul>
          <li>
            No official proposal yet.
          </li>
          <li>
            While there is no official issue for this yet, this feature request crops up in several discussions on other threads. In general, the community seems to be very interested in having something like this.
          </li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-5"><div class="header-wrapper"><h3 id="x8-4-initial-api-summary-quick-api-proposal"><bdi class="secno">8.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-5" aria-label="Permalink for Section 8.4"></a></div>
        
        <p>There is no issue or proposal yet. The following can serve as an initial idea, inspired by custom elements.</p>
        <pre aria-busy="false"><code class="hljs javascript">  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MaterialRipple</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Attr</span> </span>{
    <span class="hljs-comment">// ownerElement inherited from Attr</span>
    <span class="hljs-comment">// name inherited from Attr</span>
    <span class="hljs-comment">// value inherited from Attr</span>
    <span class="hljs-comment">// ...</span>

    connectedCallback () {
      <span class="hljs-comment">// called when the ownerElement is connected to the DOM</span>
    }

    disconnectedCallback () {
      <span class="hljs-comment">// called when the ownerElement is disconnected from the DOM</span>
    }

    <span class="hljs-function"><span class="hljs-title">attributeChangedCallback</span>(<span class="hljs-params"></span>)</span> {
      <span class="hljs-comment">// called when the value property of this attribute changes</span>
    }
}

customAttributes.define(<span class="hljs-string">"material-ripple"</span>, MaterialRipple);</code></pre>
      </section>
      <section id="key-scenarios-5"><div class="header-wrapper"><h3 id="x8-5-key-scenarios"><bdi class="secno">8.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-5" aria-label="Permalink for Section 8.5"></a></div>
        
        <p>
          </p><ul>
            <li>Enable more built-in patterns to be accomplishable by developer extensions. e.g. label for, img src</li>
            <li>Enable behaviors to be written once and used on any element.</li>
            <li>May serve as a better solution than the "is" capability of custom elements (which isn't fully supported).</li>
          </ul>
        <p></p>
      </section>
      <section id="concerns-4"><div class="header-wrapper"><h3 id="x8-6-concerns"><bdi class="secno">8.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-4" aria-label="Permalink for Section 8.6"></a></div>
        
        <p>No concerns yet.</p>
      </section>
      <section id="dissenting-opinion-3"><div class="header-wrapper"><h3 id="x8-7-dissenting-opinion"><bdi class="secno">8.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-3" aria-label="Permalink for Section 8.7"></a></div>
        
        <p>No dissenting opinions yet.</p>
      </section>
      <section id="related-specs-4"><div class="header-wrapper"><h3 id="x8-8-related-specs"><bdi class="secno">8.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-4" aria-label="Permalink for Section 8.8"></a></div>
        
        <ul>
          <li>
            <a href="#declarative-shadow-dom">Declarative Shadow DOM</a>
          </li>
          <li>
            <a href="#lazy-custom-element-definitions">Lazy Custom Element Definitions</a>
          </li>
          <li>
            <a href="#dom-parts">DOM Part API</a>
          </li>
          <li>
            <a href="#scoped-element-registries">Scoped Custom Element Registries</a>
          </li>
          <li>
            <a href="https://github.com/WICG/webcomponents/blob/gh-pages/proposals/Template-Instantiation.md">Template Instantiation</a>
          </li>
        </ul>
      </section>
      <section id="open-questions-4"><div class="header-wrapper"><h3 id="x8-9-open-questions"><bdi class="secno">8.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-4" aria-label="Permalink for Section 8.9"></a></div>
        
        <ul>
          <li>
            How should custom attributes be named? Can they follow the same hyphen convention as custom elements?
          </li>
          <li>
            SVG has some CSS properties that it surfaces as attributes. How do we prevent conflicts?
          </li>
          <li>
            It could be beneficial for a custom attribute to have access to the shadow DOM of a custom element, but is this a security issue?
          </li>
          <li>
            Should we allow access to ElementInternals? Is that a security problem? Is there a limited version of this we could support? Do custom elements need to allow this? What about built-ins?
          </li>
          <li>
            How to handle when "removeAttribute" is called?
          </li>
          <li>
            Should there be special handling for boolean attributes?
          </li>
          <li>
            Should there be a specific set of pre-defined attributes that can be opted into for custom elements. e.g. for, src
          </li>
        </ul>
      </section>
    </section>
    <section id="custom-css-state"><div class="header-wrapper"><h2 id="x9-custom-css-state"><bdi class="secno">9. </bdi>Custom CSS State</h2><a class="self-link" href="#custom-css-state" aria-label="Permalink for Section 9."></a></div>
      
      <section id="links-6"><div class="header-wrapper"><h3 id="x9-1-links"><bdi class="secno">9.1 </bdi>Links</h3><a class="self-link" href="#links-6" aria-label="Permalink for Section 9.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd>N/A</dd>
          <dt>GitHub issues:</dt>
          <dd>https://github.com/WICG/webcomponents/issues/738</dd>
          <dt>Browser positions:</dt>
          <dd>
            <ul>
              <li>
                <strong>Chrome</strong> — shipped
              </li>
              <li>
                <strong>Firefox</strong> — <a href="https://github.com/mozilla/standards-positions/issues/688">Mozilla position (GitHub issue)</a>
              </li>
              <li>
                <strong>Webkit</strong> — <a href="https://github.com/WebKit/standards-positions/issues/56">WebKit position (GitHub issue)</a>
              </li>
            </ul>
          </dd>
        </dl>
      </section>
      <section id="description-6"><div class="header-wrapper"><h3 id="x9-2-description"><bdi class="secno">9.2 </bdi>Description</h3><a class="self-link" href="#description-6" aria-label="Permalink for Section 9.2"></a></div>
        
        
        <blockquote cite="https://wicg.github.io/custom-state-pseudo-class/#motivation">
          <p>Build-in elements provided by user agents have certain “states” that can change over time depending on user interaction and other factors, and are exposed to web authors through pseudo classes. For example, some form controls have the “invalid” state, which is exposed through the :invalid pseudo-class.</p>
  
          <p>Like built-in elements, custom elements can have various states to be in too, and custom element authors want to expose these states in a similar fashion as the built-in elements.</p>
        </blockquote>
      </section>
      <section id="status-6"><div class="header-wrapper"><h3 id="x9-3-status"><bdi class="secno">9.3 </bdi>Status</h3><a class="self-link" href="#status-6" aria-label="Permalink for Section 9.3"></a></div>
        
        <ul>
          <li>A <a href="https://wicg.github.io/custom-state-pseudo-class/#exposing">draft of the spec has been written in WICG</a>.</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-6"><div class="header-wrapper"><h3 id="x9-4-initial-api-summary-quick-api-proposal"><bdi class="secno">9.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-6" aria-label="Permalink for Section 9.4"></a></div>
        
        <p>The <code>CustomStateSet</code> API allows component authors to expose internal component state for use in styling or other element-matching operations (such as <code>querySelector</code></p>

        <p>This is different from a custom element sprouting a class (via <code>this.classList.add</code> in any state added to the custom element can be seen as internal (similar to the <code>:checked</code> pseud-selector for input elements).</p>

        <p>To allow for this operation, a set-like API is exposed at <code>ElementInternals.prototype.states</code>, meaning that only custom elements can apply custom states. An example might look like the following:</p>

        <pre>          <code aria-busy="false" class="hljs javascript">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FancyElement</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>{
  #internals = <span class="hljs-built_in">this</span>.attachInternals();

  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-built_in">super</span>();
    
    <span class="hljs-keyword">const</span> root = <span class="hljs-built_in">this</span>.attachShadow({ <span class="hljs-attr">mode</span>: <span class="hljs-string">'open'</span> });
    <span class="hljs-keyword">const</span> button = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'button'</span>);
    button.innerText = <span class="hljs-string">'Add clicked state'</span>;
    button.setAttribute(<span class="hljs-string">'part'</span>, <span class="hljs-string">'btn'</span>);
    root.append(button);

    <span class="hljs-built_in">this</span>.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wasClicked</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-built_in">this</span>.#internals.states.add(<span class="hljs-string">'--clicked'</span>);
      <span class="hljs-built_in">this</span>.removeEventListener(<span class="hljs-string">'click'</span>, wasClicked);
    });
  }
}
customElements.define(<span class="hljs-string">'fancy-element'</span>, FancyElement);
          </code></pre>

        <p>Consumers of the <code>fancy-element</code> code can now take advantage of the <code>:--clicked</code> state in CSS or in any DOM querying API to modify or select the relevant element once clicked.</p>

        <p>For example, to change the background of the element's <code>btn</code> part, a consuming developer could apply the following CSS:</p>

        <pre>          <code aria-busy="false" class="hljs css">
:--clicked::<span class="hljs-built_in">part</span>(btn) {
  background: rebeccapurple;
}
          </code></pre>
        
        <p>Alternatively, a consuming developer could call <code>document.querySelectorAll(':--clicked')</code> to target all elements with the custom state.</p>
      </section>
      <section id="key-scenarios-6"><div class="header-wrapper"><h3 id="x9-5-key-scenarios"><bdi class="secno">9.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-6" aria-label="Permalink for Section 9.5"></a></div>
        
        <ul>
          <li>Allow custom element authors to expose internal state for use in CSS</li>
          <li>Allow custom element authros to expose internal state for use in DOM selection operations</li>
        </ul>
      </section>
      <section id="concerns-5"><div class="header-wrapper"><h3 id="x9-6-concerns"><bdi class="secno">9.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-5" aria-label="Permalink for Section 9.6"></a></div>
        
        <ul>
          <li>Most of the concerns around this topic are related to syntax rather than functionality. For example, some prefer the selector to match state to be something along the lines of <code>:state(--state)</code>; however, it appears as if the current status is fairly accepted right now.</li>
        </ul>
      </section>
      <section id="related-specs-5"><div class="header-wrapper"><h3 id="x9-7-related-specs"><bdi class="secno">9.7 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-5" aria-label="Permalink for Section 9.7"></a></div>
        
        <ul>
          <li><a href="https://html.spec.whatwg.org/multipage/custom-elements.html#custom-elements-face-example">Form-associated custom elements</a></li>
        </ul>
      </section>
    </section>
    <section id="declarative-css-modules"><div class="header-wrapper"><h2 id="x10-declarative-css-modules"><bdi class="secno">10. </bdi>Declarative CSS Modules</h2><a class="self-link" href="#declarative-css-modules" aria-label="Permalink for Section 10."></a></div>
      
      <section id="links-7"><div class="header-wrapper"><h3 id="x10-1-links"><bdi class="secno">10.1 </bdi>Links</h3><a class="self-link" href="#links-7" aria-label="Permalink for Section 10.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/2021.html#declarative-css-modules">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd>---</dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section id="description-7"><div class="header-wrapper"><h3 id="x10-2-description"><bdi class="secno">10.2 </bdi>Description</h3><a class="self-link" href="#description-7" aria-label="Permalink for Section 10.2"></a></div>
        
        <p>---</p>
      </section>
      <section id="status-7"><div class="header-wrapper"><h3 id="x10-3-status"><bdi class="secno">10.3 </bdi>Status</h3><a class="self-link" href="#status-7" aria-label="Permalink for Section 10.3"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-7"><div class="header-wrapper"><h3 id="x10-4-initial-api-summary-quick-api-proposal"><bdi class="secno">10.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-7" aria-label="Permalink for Section 10.4"></a></div>
        
        <p>Summary or proposal based on current status; paragraph(s) and code.</p>
      </section>
      <section id="key-scenarios-7"><div class="header-wrapper"><h3 id="x10-5-key-scenarios"><bdi class="secno">10.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-7" aria-label="Permalink for Section 10.5"></a></div>
        
        <p>---</p>
      </section>
      <section id="concerns-6"><div class="header-wrapper"><h3 id="x10-6-concerns"><bdi class="secno">10.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-6" aria-label="Permalink for Section 10.6"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="dissenting-opinion-4"><div class="header-wrapper"><h3 id="x10-7-dissenting-opinion"><bdi class="secno">10.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-4" aria-label="Permalink for Section 10.7"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="related-specs-6"><div class="header-wrapper"><h3 id="x10-8-related-specs"><bdi class="secno">10.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-6" aria-label="Permalink for Section 10.8"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="open-questions-5"><div class="header-wrapper"><h3 id="x10-9-open-questions"><bdi class="secno">10.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-5" aria-label="Permalink for Section 10.9"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
    </section>
    <section id="declarative-custom-elements"><div class="header-wrapper"><h2 id="x11-declarative-custom-elements"><bdi class="secno">11. </bdi>Declarative custom elements</h2><a class="self-link" href="#declarative-custom-elements" aria-label="Permalink for Section 11."></a></div>
      
      <section id="links-8"><div class="header-wrapper"><h3 id="x11-1-links"><bdi class="secno">11.1 </bdi>Links</h3><a class="self-link" href="#links-8" aria-label="Permalink for Section 11.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/2021.html#declarative-custom-elements">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd>
            <ul>
              <li><a href="https://github.com/WICG/webcomponents/blob/gh-pages/proposals/Declarative-Custom-Elements-Strawman.md">Initial Proposal</a></li>
              <li><a href="https://github.com/Westbrook/custom-element-proposals/pull/1">Single File Component Explainer</a></li>
              <li><a href="https://github.com/WICG/webcomponents/issues/645">Cross-over with HTML Modules</a></li>
              <li><a href="https://github.com/w3c/webcomponents-cg/issues/32">Discussion</a></li>
            </ul>
          </dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section id="description-8"><div class="header-wrapper"><h3 id="x11-2-description"><bdi class="secno">11.2 </bdi>Description</h3><a class="self-link" href="#description-8" aria-label="Permalink for Section 11.2"></a></div>
        
        <p>A method of creating custom elements completely with declarative HTML, not requiring JavaScript.</p>
      </section>
      <section id="status-8"><div class="header-wrapper"><h3 id="x11-3-status"><bdi class="secno">11.3 </bdi>Status</h3><a class="self-link" href="#status-8" aria-label="Permalink for Section 11.3"></a></div>
        
        <ul>
          <li>Strawperson proposal available.</li>
          <li>Dependent on many other proposals that are not yet finished.</li>
          <li>Many people would like to have something like this but it seems too early due to the number of unfinished dependencies.</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-8"><div class="header-wrapper"><h3 id="x11-4-initial-api-summary-quick-api-proposal"><bdi class="secno">11.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-8" aria-label="Permalink for Section 11.4"></a></div>
        
        <p>The following, copied from the original strapwerson proposal, demonstrates how a declarative custom element could be defined with the need for JavaScript.</p>
        <pre aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">definition</span>&nbsp;<span class="hljs-attr">name</span>=<span class="hljs-string">"percentage-bar"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&nbsp;<span class="hljs-attr">shadowmode</span>=<span class="hljs-string">"closed"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&nbsp;<span class="hljs-attr">id</span>=<span class="hljs-string">"progressbar"</span>&nbsp;<span class="hljs-attr">role</span>=<span class="hljs-string">"progressbar"</span>&nbsp;<span class="hljs-attr">aria-valuemin</span>=<span class="hljs-string">"0"</span>&nbsp;<span class="hljs-attr">aria-valuemax</span>=<span class="hljs-string">"100"</span>&nbsp;<span class="hljs-attr">aria-valuenow</span>=<span class="hljs-string">"{{\root.attributes.percentage.value}}"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&nbsp;<span class="hljs-attr">id</span>=<span class="hljs-string">"bar"</span>&nbsp;<span class="hljs-attr">style</span>=<span class="hljs-string">"width:&nbsp;{{\root.attributes.percentage.value}}%"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&nbsp;<span class="hljs-attr">id</span>=<span class="hljs-string">"label"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-selector-pseudo">:host</span>&nbsp;{&nbsp;<span class="hljs-attribute">display</span>:&nbsp;inline-block&nbsp;<span class="hljs-meta">!important</span>;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-selector-id">#progressbar</span>&nbsp;{&nbsp;<span class="hljs-attribute">position</span>:&nbsp;relative;&nbsp;<span class="hljs-attribute">display</span>:&nbsp;block;&nbsp;<span class="hljs-attribute">width</span>:&nbsp;<span class="hljs-number">100%</span>;&nbsp;<span class="hljs-attribute">height</span>:&nbsp;<span class="hljs-number">100%</span>;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-selector-id">#bar</span>&nbsp;{&nbsp;<span class="hljs-attribute">background-color</span>:&nbsp;<span class="hljs-number">#36f</span>;&nbsp;<span class="hljs-attribute">height</span>:&nbsp;<span class="hljs-number">100%</span>;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-selector-id">#label</span>&nbsp;{&nbsp;<span class="hljs-attribute">position</span>:&nbsp;absolute;&nbsp;<span class="hljs-attribute">top</span>:&nbsp;<span class="hljs-number">0px</span>;&nbsp;<span class="hljs-attribute">left</span>:&nbsp;<span class="hljs-number">0px</span>;&nbsp;<span class="hljs-attribute">width</span>:&nbsp;<span class="hljs-number">100%</span>;&nbsp;<span class="hljs-attribute">height</span>:&nbsp;<span class="hljs-number">100%</span>;&nbsp;<span class="hljs-attribute">text-align</span>:&nbsp;center;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">definition</span>&gt;</span></code></pre>
      </section>
      <section id="key-scenarios-8"><div class="header-wrapper"><h3 id="x11-5-key-scenarios"><bdi class="secno">11.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-8" aria-label="Permalink for Section 11.5"></a></div>
        
        <ul>
          <li>Create reusable custom elements without needing to load or run JavaScript.</li>
          <li>Use custom elements in noscript contexts.</li>
          <li>Open up new opportunities for more efficient server-side-rendering. e.g. Smaller html payloads due to less duplication of HTML</li>
          <li>Codify framework "single file component" patterns in the platform.</li>
        </ul>
      </section>
      <section id="concerns-7"><div class="header-wrapper"><h3 id="x11-6-concerns"><bdi class="secno">11.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-7" aria-label="Permalink for Section 11.6"></a></div>
        
        <ul>
          <li>Binding syntax for attributes is extremely verbose. e.g. "{{root.attributes.percentage.value}}" is used instead of something terser like "{{percentage}}" .</li>
          <li>Binding syntax doesn't look extensible.</li>
          <li>A lot of cooperation from tooling and plugin authors will be required to enable developer ergonomics and adoption.</li>
          <li>The current proposal's script model creates a second way of coding components with some different behavior from what we have today.</li>
          <li>The current proposal conflicts in syntax with Declarative Shadow DOM.</li>
        </ul>
      </section>
      <section id="dissenting-opinion-5"><div class="header-wrapper"><h3 id="x11-7-dissenting-opinion"><bdi class="secno">11.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-5" aria-label="Permalink for Section 11.7"></a></div>
        
        <p>No dissenting opinions yet.</p>
      </section>
      <section id="related-specs-7"><div class="header-wrapper"><h3 id="x11-8-related-specs"><bdi class="secno">11.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-7" aria-label="Permalink for Section 11.8"></a></div>
        
        <ul>
          <li>
            <a href="https://html.spec.whatwg.org/multipage/scripting.html#htmltemplateelement">HTML Template Element</a>
          </li>
          <li>
            <a href="https://html.spec.whatwg.org/multipage/custom-elements.html#form-associated-custom-elements">Form Associated Custom Elements</a>
          </li>
          <li>
            <a href="https://wicg.github.io/custom-state-pseudo-class/#customstateset">Custom State Set</a>
          </li>
          <li>
            <a href="#declarative-css-modules">Declarative CSS Modules</a>
          </li>
          <li>
            <a href="#dom-parts">DOM Part API</a>
          </li>
          <li>
            <a href="https://github.com/WICG/webcomponents/blob/gh-pages/proposals/Template-Instantiation.md">Template Instantiation</a>
          </li>
          <li>
            <a href="#scoped-element-registries">Scoped Custom Element Registries</a>
          </li>
          <li>
            <a href="#lazy-custom-element-definitions">Lazy Custom Element Definitions</a>
          </li>
          <li>
            <a href="#cross-root-aria">Cross Root Aria</a>
          </li>
          <li>
            <a href="#html-modules">HTML Modules</a>
          </li>
        </ul>
      </section>
      <section id="open-questions-6"><div class="header-wrapper"><h3 id="x11-9-open-questions"><bdi class="secno">11.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-6" aria-label="Permalink for Section 11.9"></a></div>
        
        <ul>
          <li>Shouldn't attributes be declared instead of inferred through the bindings?</li>
          <li>How to handle boolean attributes and reflected attributes?</li>
          <li>If script is provided through src, how should loading be handled? Does it block or can it be partially upgraded?</li>
          <li>How does this support aria roles, degegated aria, and cross-root aria?</li>
          <li>How is form association handled?</li>
          <li>When script is provided, how does it interact with or gain access to the template and styles?</li>
          <li>Should there be ways to ship definitions along with a data set or top-level template so that small payloads of data can be automatically combined with template and element declarations without the need for JS?</li>
        </ul>
      </section>
    </section>
    <section id="declarative-shadow-dom"><div class="header-wrapper"><h2 id="x12-declarative-shadow-dom"><bdi class="secno">12. </bdi>Declarative Shadow DOM</h2><a class="self-link" href="#declarative-shadow-dom" aria-label="Permalink for Section 12."></a></div>
      
      <section id="links-9"><div class="header-wrapper"><h3 id="x12-1-links"><bdi class="secno">12.1 </bdi>Links</h3><a class="self-link" href="#links-9" aria-label="Permalink for Section 12.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/2021.html#declarative-shadow-dom">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/whatwg/dom/issues/831">https://github.com/whatwg/dom/issues/831</a></dd>
          <dt>Browser positions:</dt>
          <dd><a href="https://chromestatus.com/feature/5191745052606464">Chrome (Shipped)</a></dd>
          <dd><a href="https://github.com/mozilla/standards-positions/issues/335">Mozilla</a></dd>
          <dd><a href="https://github.com/WebKit/standards-positions/issues/12">Safari</a></dd>
        </dl>
      </section>
      <section id="description-9"><div class="header-wrapper"><h3 id="x12-2-description"><bdi class="secno">12.2 </bdi>Description</h3><a class="self-link" href="#description-9" aria-label="Permalink for Section 12.2"></a></div>
        
        <p>Declarative Shadow DOM is a mechanism to express Shadow DOM using only HTML, with no dependency on JavaScript, much like light DOM can be declaratively expressed today.</p>
      </section>
      <section id="status-9"><div class="header-wrapper"><h3 id="x12-3-status"><bdi class="secno">12.3 </bdi>Status</h3><a class="self-link" href="#status-9" aria-label="Permalink for Section 12.3"></a></div>
        
        <ul>
          <li>Partial consensus, some implementation</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-9"><div class="header-wrapper"><h3 id="x12-4-initial-api-summary-quick-api-proposal"><bdi class="secno">12.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-9" aria-label="Permalink for Section 12.4"></a></div>
        
        <p>Below is an example taken from the <a href="https://web.dev/declarative-shadow-dom">web.dev blog</a> on Declarative Shadow DOM.
          </p><pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">host-element</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">shadowroot</span>=<span class="hljs-string">"open"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Light content<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">host-element</span>&gt;</span></code></pre>
        <p></p>
      </section>
      <section id="key-scenarios-9"><div class="header-wrapper"><h3 id="x12-5-key-scenarios"><bdi class="secno">12.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-9" aria-label="Permalink for Section 12.5"></a></div>
        
        <p>Server-Side Rendering: Without Declarative Shadow DOM, servers cannot deliver complete websites that include web component content. Markup cannot be efficiently delivered and then hydrated with JavaScript client-side.</p>
        <p>JavaScript-less environments: Many web components could be implemented without JavaScript, taking advantage of encapsulated DOM and styles. However, web components cannot currently be rendered by users who have JavaScript disabled. Developers who are more comfortable with markup than with scripting may avoid shadow DOM altogether due to its tight coupling with JavaScript..</p>
      </section>
      <section id="concerns-8"><div class="header-wrapper"><h3 id="x12-6-concerns"><bdi class="secno">12.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-8" aria-label="Permalink for Section 12.6"></a></div>
        
        <ul>
          <li>Mozilla considers this to be non-harmful, though debates the merits on ROI to developers weighed against the added complexity to be added to the HTML parser from a performance perspective.</li>
          <li>Safari would like to see compatibility with Scoped Element Registry addressed first.</li>
        </ul>
      </section>
      <section id="dissenting-opinion-6"><div class="header-wrapper"><h3 id="x12-7-dissenting-opinion"><bdi class="secno">12.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-6" aria-label="Permalink for Section 12.7"></a></div>
        
        <ul>
          <li>N / A</li>
        </ul>
      </section>
      <section id="related-specs-8"><div class="header-wrapper"><h3 id="x12-8-related-specs"><bdi class="secno">12.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-8" aria-label="Permalink for Section 12.8"></a></div>
        
        <ul>
          <li><a href="https://github.com/WICG/webcomponents/issues/716">Scoped Element Registries</a></li>
        </ul>
      </section>
      <section id="open-questions-7"><div class="header-wrapper"><h3 id="x12-9-open-questions"><bdi class="secno">12.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-7" aria-label="Permalink for Section 12.9"></a></div>
        
        <ul>
          <li>Mozilla would like to see more <a href="https://github.com/whatwg/dom/issues/831#issuecomment-988394185">real world uses cases</a> of Declarative Shadow DOM in the wild.  <a href="https://github.com/whatwg/dom/issues/831#issuecomment-1204554491" target="_blank">GitHub has confirmed that they are using DSD</a> and see many architectural benefits from it, especially for their design system. Although a polyfill exists, it comes as a bit of a catch-22 when trying to target pure SSR Web Components (HTML) use cases.</li>
          <li>Safari would like to <a href="https://github.com/whatwg/dom/issues/831#issuecomment-797845645">get consensus on the solution for Scoped Element Registries first.</a></li>
        </ul>
      </section>
    </section>
    <section id="dom-parts"><div class="header-wrapper"><h2 id="x13-dom-parts"><bdi class="secno">13. </bdi>DOM Parts</h2><a class="self-link" href="#dom-parts" aria-label="Permalink for Section 13."></a></div>
      
      <section id="links-10"><div class="header-wrapper"><h3 id="x13-1-links"><bdi class="secno">13.1 </bdi>Links</h3><a class="self-link" href="#links-10" aria-label="Permalink for Section 13.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd>N/A</dd>
          <dt>GitHub issues:</dt>
          <dd>
            <ul>
              <li>
                <a href="https://github.com/WICG/webcomponents/blob/gh-pages/proposals/DOM-Parts.md">Initial Proposal</a>
              </li>
              <li>
                <a href="https://docs.google.com/document/d/1UVtF1gM6XY-_NKm2_c045K803U3ZTjfyluLeToJlIUk/edit">Alternative Diffing Proposal</a>
              </li>
              <li>
                <a href="https://github.com/WICG/webcomponents/issues/902">Naming Discussion</a>
              </li>
            </ul>
          </dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section id="description-10"><div class="header-wrapper"><h3 id="x13-2-description"><bdi class="secno">13.2 </bdi>Description</h3><a class="self-link" href="#description-10" aria-label="Permalink for Section 13.2"></a></div>
        
        <p>A mechanism to insert or replace content at specific locations within the DOM tree.</p>
      </section>
      <section id="status-10"><div class="header-wrapper"><h3 id="x13-3-status"><bdi class="secno">13.3 </bdi>Status</h3><a class="self-link" href="#status-10" aria-label="Permalink for Section 13.3"></a></div>
        
        <ul>
          <li>Strawperson proposal available.</li>
          <li>General consensus is that this is needed and could be used by existing Web Component and Frontend libraries and frameworks.</li>
          <li>Lots of bike shedding over naming.</li>
          <li>There is a large number of open questions both on this feature and how it interacts with other proposals.</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-10"><div class="header-wrapper"><h3 id="x13-4-initial-api-summary-quick-api-proposal"><bdi class="secno">13.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-10" aria-label="Permalink for Section 13.4"></a></div>
        
        <p>The following is a summary of the core types from the proposal.</p>
        <pre aria-busy="false"><code class="hljs javascript">interface Part {
    attribute any value;
    <span class="hljs-keyword">void</span> commit();
};


interface NodePart : Part {
    readonly attribute Node node;
};


interface AttributePart : Part {
    <span class="hljs-title">constructor</span>(<span class="hljs-params">Element element, DOMString qualifiedName, DOMString? namespace</span>);
    readonly attribute DOMString prefix;
    readonly attribute DOMString localName;
    readonly attribute DOMString namespaceURI;
};


interface ChildNodePart : Part {
    <span class="hljs-title">constructor</span>(<span class="hljs-params">Node node, Node? previousSibling, Node? nextSibling</span>);
    readonly attribute Node parentNode;
    readonly attribute Node? previousSibling;
    readonly attribute Node? nextSibling;
}</code></pre>
      </section>
      <section id="key-scenarios-10"><div class="header-wrapper"><h3 id="x13-5-key-scenarios"><bdi class="secno">13.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-10" aria-label="Permalink for Section 13.5"></a></div>
        
        <p>
          </p><ul>
            <li>
              Enable batched updates to the DOM, usable by library/framework view engines. Library authors would be able to remove part of their user-land solution, shrinking libraries and reducing JS execution.
            </li>
            <li>
              Needed as a steppingstone towards reactive bindings for custom elements.
            </li>
          </ul>
        <p></p>
      </section>
      <section id="concerns-9"><div class="header-wrapper"><h3 id="x13-6-concerns"><bdi class="secno">13.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-9" aria-label="Permalink for Section 13.6"></a></div>
        
        <ul>
          <li>
            Naming the API as "Part" could cause confusion with CSS Shadow Parts. No consensus over naming reached yet.
          </li>
        </ul>
      </section>
      <section id="dissenting-opinion-7"><div class="header-wrapper"><h3 id="x13-7-dissenting-opinion"><bdi class="secno">13.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-7" aria-label="Permalink for Section 13.7"></a></div>
        
        <ul>
          <li>
            Some individuals, particularly from React-ish backgrounds, would prefer a diffing-based alternative to batched updates. However, there are several problems with the diffing proposal.
            <ul>
              <li>
                The core proposal shows diffing between real DOM nodes, which is very heavy.
              </li>
              <li>
                The diffing proposal acknowledges the above flaw and attempts to solve it by proposing a JavaScript API to create virtual DOMs but it's unclear why existing libraries can't be used for this.
              </li>
              <li>
                It is not clear how this maps to fully declarative templates down the road, which are created in real DOM.
              </li>
            </ul>
          </li>
        </ul>
      </section>
      <section id="related-specs-9"><div class="header-wrapper"><h3 id="x13-8-related-specs"><bdi class="secno">13.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-9" aria-label="Permalink for Section 13.8"></a></div>
        
        <ul>
          <li>
            <a href="#declarative-shadow-dom">Declarative Shadow DOM</a>
          </li>
          <li>
            <a href="#declarative-custom-elements">Declarative Custom Elements</a>
          </li>
          <li>
            <a href="https://github.com/WICG/webcomponents/blob/gh-pages/proposals/Template-Instantiation.md">Template Instantiation</a>
          </li>
          <li>
            <a href="#custom-attributes">Custom Attributes</a>
          </li>
        </ul>
      </section>
      <section id="open-questions-8"><div class="header-wrapper"><h3 id="x13-9-open-questions"><bdi class="secno">13.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-8" aria-label="Permalink for Section 13.9"></a></div>
        
        <ul>
          <li>
            How to handle attribute parts when there is a mixture of static and dynamic parts needed to assemble the attribute value?
          </li>
          <li>
            How to handle child node updates when there is a mixture of elements, text, etc. that are potentially changing.
          </li>
          <li>
            How to handle setting properties?
          </li>
          <li>
            How do libraries and frameworks handle custom behaviors/directives?
          </li>
          <li>
            How do we handle batches of updates and ordering of updates?
          </li>
          <li>
            How do we clone templates to efficiently reproduce the template content and the proper part setup?
          </li>
          <li>
            Could part references be shared with workers to allow DOM updates from workers?
          </li>
        </ul>
      </section>
    </section>
    <section id="form-associated-custom-elements"><div class="header-wrapper"><h2 id="x14-form-associated-custom-elements"><bdi class="secno">14. </bdi>Form-Associated Custom Elements</h2><a class="self-link" href="#form-associated-custom-elements" aria-label="Permalink for Section 14."></a></div>
      
      <section id="links-11"><div class="header-wrapper"><h3 id="x14-1-links"><bdi class="secno">14.1 </bdi>Links</h3><a class="self-link" href="#links-11" aria-label="Permalink for Section 14.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/2021.html#form-associated-custom-elements">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/whatwg/html/issues">https://github.com/whatwg/html/issues</a></dd>
          <dt>Browser positions:</dt>
          <dd>
            <ul>
              <li>
                <a href="https://github.com/WebKit/standards-positions/issues/47">WebKit</a>
              </li>
            </ul>
          </dd>
        </dl>
      </section>
      <section id="description-11"><div class="header-wrapper"><h3 id="x14-2-description"><bdi class="secno">14.2 </bdi>Description</h3><a class="self-link" href="#description-11" aria-label="Permalink for Section 14.2"></a></div>
        
        <p>The form-associated custom elements APIs enable custom elements to participate in form submission and validation lifecycles.</p>
      </section>
      <section id="status-11"><div class="header-wrapper"><h3 id="x14-3-status"><bdi class="secno">14.3 </bdi>Status</h3><a class="self-link" href="#status-11" aria-label="Permalink for Section 14.3"></a></div>
        
        <ul>
          <li>
            <a href="https://chromestatus.com/feature/4708990554472448">Chrome/Edge (shipped in version 77)</a>
          </li>
          <li>
            <a href="https://developer.mozilla.org/en-US/docs/Web/API/ElementInternals/setFormValue">Firefox (shipped in version 90)</a>
          </li>
          <li>
            <a href="https://github.com/WebKit/standards-positions/issues/47#issuecomment-1221419927">WebKit is in favor and has the feature in active development</a> and has <a href="https://github.com/WebKit/WebKit/pull/2690">merged a PR implementing the first part of <code>ElementInternals</code></a> which includes the form-associated custom elements behavior; however, the initial PR doesn't include the actual form-association APIs.
          </li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-11"><div class="header-wrapper"><h3 id="x14-4-initial-api-summary-quick-api-proposal"><bdi class="secno">14.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-11" aria-label="Permalink for Section 14.4"></a></div>
        
        <p>The form-associated custom elements APIs are implemented within the attachInternals method on the HTMLElement prototype. Calling attachInternals returns an instance of an ElementInternals object which grants developers the ability to interact with form elements provided they designate their element as a form-associated element.</p>
        <pre>      <code aria-busy="false" class="hljs xml">
<span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">fancy-input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"fancy"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">fancy-input</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FancyInput</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title">formAssociated</span>() {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> {
      <span class="hljs-built_in">super</span>();
      <span class="hljs-built_in">this</span>.#internals = <span class="hljs-built_in">this</span>.attachInternals();
      <span class="hljs-built_in">this</span>.#internals.setFormValue(<span class="hljs-string">'I can participate in a form!'</span>);
    }
  }

  customElements.define(<span class="hljs-string">'fancy-input'</span>, FancyInput);

  <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'form'</span>).addEventListener(<span class="hljs-string">'submit'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
    event.preventDefault();
    <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> FormData(event.target);

    <span class="hljs-built_in">console</span>.log(formData.get(<span class="hljs-string">'fancy'</span>)); <span class="hljs-comment">// logs 'I can participate in a form!'</span>
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
      </code></pre>
        <p>The <code>setFormValue</code> method can accept several types of data including strings, <code>FileData</code> and <code>FormData</code> objects, the latter of which can allow a nested form to participate with a parent in its entirety.</p>
        <p>In addition to providing an method for adding a value to a form object, the form-associated APIs provide a surface to allow custom elements to participate in form validation.</p>
        <pre>          <code aria-busy="false" class="hljs javascript">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FancyInput</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLElement</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title">formAssociated</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-built_in">super</span>();
    <span class="hljs-keyword">const</span> root = <span class="hljs-built_in">this</span>.attachShadow({ <span class="hljs-attr">mode</span>: <span class="hljs-string">'open'</span> });
    <span class="hljs-built_in">this</span>.#internals = <span class="hljs-built_in">this</span>.attachInternals();
    <span class="hljs-built_in">this</span>.#internals.setFormValue(<span class="hljs-string">'I can participate in a form!'</span>);
    <span class="hljs-keyword">const</span> button = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'button'</span>);
    root.append(button);

    button.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-built_in">this</span>.#onClick);
    <span class="hljs-built_in">this</span>.button = button;
  }

  #onClick = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.#internals.invalid) {
      <span class="hljs-built_in">this</span>.#internals.setValidity(); <span class="hljs-comment">// Marks the element as valid</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">this</span>.#internals.setValidity({
        <span class="hljs-attr">customError</span>: <span class="hljs-literal">true</span>
        }, <span class="hljs-string">'You must click the button'</span>, <span class="hljs-built_in">this</span>.button); <span class="hljs-comment">// Marks the element as invalid and will focus on the button when the form checks validity</span>
  }
}
          </code></pre>
      </section>
      <section id="key-scenarios-11"><div class="header-wrapper"><h3 id="x14-5-key-scenarios"><bdi class="secno">14.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-11" aria-label="Permalink for Section 14.5"></a></div>
        
        <ul>
          <li>Enable custom elements to participate in form submission by adding a value to the <code>FormData</code> object, adding to the <code>HTMLFormElement.prototype.elements</code> object and in other submission formats.</li>
          <li>Enables custom elements to participate in the form validation lifecycle by providing APIs similar to and building on top of the constraint validation APIs.</li>
        </ul>
      </section>
      <section id="concerns-10"><div class="header-wrapper"><h3 id="x14-6-concerns"><bdi class="secno">14.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-10" aria-label="Permalink for Section 14.6"></a></div>
        
        <ul>
          <li><a href="https://github.com/whatwg/html/issues/5891">HTMLFormElement elements does not contain form-associated CustomElements when name attribute is shared</a></li>
          <li>The form-associated APIs currently have <a href="https://github.com/WICG/webcomponents/issues/814">no way for a developer to behave as a custom submit button</a>. Though there are <a href="https://twitter.com/justinfagnani/status/1510387984830386180">several</a> <a href="https://github.com/open-wc/form-participation/tree/main/packages/form-helpers#implicit-form-submit">workarounds</a>.</li>
        </ul>
      </section>
      <section id="related-specs-10"><div class="header-wrapper"><h3 id="x14-7-related-specs"><bdi class="secno">14.7 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-10" aria-label="Permalink for Section 14.7"></a></div>
        
        <ul>
          <li>
            <code>CustomStateSet</code>
            <ul>
              <li>
                <a href="https://wicg.github.io/custom-state-pseudo-class/#customstateset">Specification</a>
              </li>
              <li>
                <a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomStateSet">
                  <abbr title="Mozilla Developer Network">MDN</abbr>
                </a>
              </li>
            </ul>
          </li>
          <li>
            <a href="https://wicg.github.io/aom/explainer.html#default-semantics-for-custom-elements-via-the-elementinternals-object">
              AriaMixin/accessibility object model
            </a>
          </li>
        </ul>
      </section>
      <section id="open-questions-9"><div class="header-wrapper"><h3 id="x14-8-open-questions"><bdi class="secno">14.8 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-9" aria-label="Permalink for Section 14.8"></a></div>
        
        <ul>
          <li>
            It is currently unclear how form-associated custom elements should participate in the autocomplete lifecycle despite there being an API for that purpose. It is currently unclear per the spec how this behavior should work. Currently Chromium implements code for the <code>formStateRestoreCallback</code> callback only for restore events (such as back button or page refresh), but does not call the custom element reaction for autocomplete. Firefox currently does not ship any code referencing the <code>formStateRestoreCallback</code>.
            <ul>
              <li>
                <a href="https://github.com/whatwg/html/issues/7292">Form restoration interop</a>
              </li>
              <li>
                <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1335202">
                  Chromimum Issue 1335202: formStateRestoreCallback custom element reaction will not be called for 'autocomplete'
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </section>
    </section>
    <section id="html-modules"><div class="header-wrapper"><h2 id="x15-html-modules"><bdi class="secno">15. </bdi>HTML modules</h2><a class="self-link" href="#html-modules" aria-label="Permalink for Section 15."></a></div>
      
      <section id="links-12"><div class="header-wrapper"><h3 id="x15-1-links"><bdi class="secno">15.1 </bdi>Links</h3><a class="self-link" href="#links-12" aria-label="Permalink for Section 15.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd>N/A</dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/WICG/webcomponents/issues/645">HTML Modules</a></dd>
          <dt>Browser positions:</dt>
          <dd><a href="https://chromestatus.com/feature/4854408103854080">Chrome</a></dd>
          <dd><a href="https://mozilla.github.io/standards-positions/#html-modules">Firefox</a></dd>
          <dd><a href="https://webkit.org/status/#feature-html-import">Safari</a></dd>
        </dl>
      </section>
      <section id="description-12"><div class="header-wrapper"><h3 id="x15-2-description"><bdi class="secno">15.2 </bdi>Description</h3><a class="self-link" href="#description-12" aria-label="Permalink for Section 15.2"></a></div>
        
        <p>HTML Modules would provide a means of referencing HTML through the web's module system.  For Web Components specifically, this would allow the usage of <code>import</code> to load and initialize the template of a custom element, much in the same way <a href="#css-module-scripts">CSS Modules</a> would work for an <code>adoptedStyleSheet</code>.</p>
        <p>Additionally, this could open up the concept of <a href="https://github.com/WICG/webcomponents/issues/645#issuecomment-343601237">Single File Components (SFC)</a> to the web.</p>
      </section>
      <section id="status-12"><div class="header-wrapper"><h3 id="x15-3-status"><bdi class="secno">15.3 </bdi>Status</h3><a class="self-link" href="#status-12" aria-label="Permalink for Section 15.3"></a></div>
        
        <ul>
          <li>Chrome (shipped, but not aligned with ESM)</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-12"><div class="header-wrapper"><h3 id="x15-4-initial-api-summary-quick-api-proposal"><bdi class="secno">15.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-12" aria-label="Permalink for Section 15.4"></a></div>
        
        <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">import</span> template <span class="hljs-keyword">from</span> <span class="hljs-string">'my-template.html'</span> <span class="hljs-keyword">as</span> HTMLTemplateElement;

MyCustomElement <span class="hljs-keyword">extends</span> HTMLElement {
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-keyword">const</span> root = <span class="hljs-built_in">this</span>.attachShadow({<span class="hljs-attr">mode</span>: <span class="hljs-string">'closed'</span>});
    root.appendChild(<span class="hljs-built_in">document</span>.importNode(template));
  }
}</code></pre>
      </section>
      <section id="key-scenarios-12"><div class="header-wrapper"><h3 id="x15-5-key-scenarios"><bdi class="secno">15.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-12" aria-label="Permalink for Section 15.5"></a></div>
        
        <p>The primary motivation for HTML Modules is to round out ESM so that all of the three main web languages (HTML / CSS / JS) can be leveraged through a module system.  For Web Components, this is especially helpful for scenarios related to Server Side Rendering or any form of templating, static or otherwise.  Having a common mechanism in JavaScript to author and use Web Components makes for a great experience all around.</p>
        <p>Additionally it will work great if you prefer to separate your technologies (e.g. <em>my-component.(js|css|html)</em> ), or your (CSS|HTML)-in-JS</p> in one file.
      </section>
      <section id="concerns-11"><div class="header-wrapper"><h3 id="x15-6-concerns"><bdi class="secno">15.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-11" aria-label="Permalink for Section 15.6"></a></div>
        
        <ul>
          <li>Main concern is that now that ESM and Import Assertions are a thing, it is recognized that the proposal for HTML Modules needs to be re-drafted accordingly.</li>
        </ul>
      </section>
      <section id="dissenting-opinion-8"><div class="header-wrapper"><h3 id="x15-7-dissenting-opinion"><bdi class="secno">15.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-8" aria-label="Permalink for Section 15.7"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="related-specs-11"><div class="header-wrapper"><h3 id="x15-8-related-specs"><bdi class="secno">15.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-11" aria-label="Permalink for Section 15.8"></a></div>
        
        <ul>
          <li><a href="#css-module-scripts">CSS Modules</a></li>
          <li><a href="#declarative-shadow-dom">Declarative Shadow DOM</a></li>
          <li><a href="#declarative-custom-elements">Declarative Custom Elements</a></li>
        </ul>
      </section>
      <section id="open-questions-10"><div class="header-wrapper"><h3 id="x15-9-open-questions"><bdi class="secno">15.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-10" aria-label="Permalink for Section 15.9"></a></div>
        
        <ul>
          <li>What sort of "scope" should the imported HTML be allowed to have?  Should it execute inline script tags?</li>
          <li>What should the inline API look like for this?</li>
          <li>How to treat the incoming HTML; as a <code>Document</code>?  As a string? (see the scope concern above)</li>
          <li>Would / should this align with the the import assertions spec, like with CSS Modules?</li>
        </ul>
      </section>
    </section>
    <section id="imperative-slot-assignment"><div class="header-wrapper"><h2 id="x16-imperative-slot-assignment"><bdi class="secno">16. </bdi>Imperative Slot Assignment</h2><a class="self-link" href="#imperative-slot-assignment" aria-label="Permalink for Section 16."></a></div>
      
      <section id="links-13"><div class="header-wrapper"><h3 id="x16-1-links"><bdi class="secno">16.1 </bdi>Links</h3><a class="self-link" href="#links-13" aria-label="Permalink for Section 16.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd>N/A</dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/whatwg/html/issues/3534">whatwg/html#3534</a></dd>
          <dt>Browser positions:</dt>
          <dd><a href="https://github.com/mozilla/standards-positions/issues/335" target="_blank">Firefox</a></dd>
        </dl>
      </section>
      <section id="description-13"><div class="header-wrapper"><h3 id="x16-2-description"><bdi class="secno">16.2 </bdi>Description</h3><a class="self-link" href="#description-13" aria-label="Permalink for Section 16.2"></a></div>
        
        <p>---</p>
      </section>
      <section id="status-13"><div class="header-wrapper"><h3 id="x16-3-status"><bdi class="secno">16.3 </bdi>Status</h3><a class="self-link" href="#status-13" aria-label="Permalink for Section 16.3"></a></div>
        
        <ul>
          <li><a href="https://chromestatus.com/feature/5711021289242624" target="_blank">Chrome</a> (Shipped)</li>
          <li><a href="" target="_blank">Firefox</a> (Shipped)</li>
          <li><a href="https://webkit.org/status/#feature-imperative-slot-api" target="_blank">Safari (Shipped?)</a></li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-13"><div class="header-wrapper"><h3 id="x16-4-initial-api-summary-quick-api-proposal"><bdi class="secno">16.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-13" aria-label="Permalink for Section 16.4"></a></div>
        
        <p>Currently the Slot API only supports a declarative API, meaning that slot usage can only be expressed through adding the name attribute on an element.  But there are valid cases where from multiple sources of slotted content, the Web Components author may want to programmatically set the content of a slot instead.  Take <a href="https://github.com/WICG/webcomponents/blob/gh-pages/proposals/Imperative-Shadow-DOM-Distribution-API.md" target="_blank">this example</a> from the proposal.</p>
        <pre aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">custom-tab</span> <span class="hljs-attr">show-panel</span>=<span class="hljs-string">"2"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tab-panel</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tab-panel</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tab-panel</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tab-panel</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tab-panel</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tab-panel</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">custom-tab</span>&gt;</span></code></pre>
        <p>Without an imperative API, how would an author be able to set the contents of a single available slot to the selected panel index?</p>
      </section>
      <section id="key-scenarios-13"><div class="header-wrapper"><h3 id="x16-5-key-scenarios"><bdi class="secno">16.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-13" aria-label="Permalink for Section 16.5"></a></div>
        
        <p>Some of the scenarios called out in the proposal include not having to pre-compute the slot names ahead of time, as well as being able to conditionally load content into a slot.</p>
      </section>
      <section id="concerns-12"><div class="header-wrapper"><h3 id="x16-6-concerns"><bdi class="secno">16.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-12" aria-label="Permalink for Section 16.6"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="dissenting-opinion-9"><div class="header-wrapper"><h3 id="x16-7-dissenting-opinion"><bdi class="secno">16.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-9" aria-label="Permalink for Section 16.7"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="related-specs-12"><div class="header-wrapper"><h3 id="x16-8-related-specs"><bdi class="secno">16.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-12" aria-label="Permalink for Section 16.8"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="open-questions-11"><div class="header-wrapper"><h3 id="x16-9-open-questions"><bdi class="secno">16.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-11" aria-label="Permalink for Section 16.9"></a></div>
        
        <ul>
          <li>What is Safari's timeline for shipping?  Their feature tracker confirms it is supported, but <a href="https://codepen.io/Westbrook/pen/GRvbWzM">this example</a> doesn't work on iOS.</li>
        </ul>
      </section>
    </section>
    <section id="lazy-custom-element-definitions"><div class="header-wrapper"><h2 id="x17-lazy-custom-element-definitions"><bdi class="secno">17. </bdi>Lazy custom element definitions</h2><a class="self-link" href="#lazy-custom-element-definitions" aria-label="Permalink for Section 17."></a></div>
      
      <section id="links-14"><div class="header-wrapper"><h3 id="x17-1-links"><bdi class="secno">17.1 </bdi>Links</h3><a class="self-link" href="#links-14" aria-label="Permalink for Section 17.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd>N/A</dd>
          <dt>GitHub issues:</dt>
          <dd>
            <ul>
              <li>
                <a href="https://github.com/WICG/webcomponents/issues/782">Initial Proposal</a>
              </li>
              <li>
                <a href="https://github.com/WICG/webcomponents/issues/444">Alternative Proposal (closed)</a>
              </li>
              <li>
                <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1460815">Firefox Internal Issue</a>
              </li>
            </ul>
          </dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section id="description-14"><div class="header-wrapper"><h3 id="x17-2-description"><bdi class="secno">17.2 </bdi>Description</h3><a class="self-link" href="#description-14" aria-label="Permalink for Section 17.2"></a></div>
        
        <p>
          Enable the browser to automatically load a custom element definition when it first sees the associated tag.
        </p>
      </section>
      <section id="status-14"><div class="header-wrapper"><h3 id="x17-3-status"><bdi class="secno">17.3 </bdi>Status</h3><a class="self-link" href="#status-14" aria-label="Permalink for Section 17.3"></a></div>
        
        <ul>
          <li>
            Strawperson proposal available.
          </li>
          <li>
            There is further disagreement as to whether this feature is needed. However, the community generally tends to lean toward wanting some version of this.
          </li>
          <li>
            There are many open questions around the feature-set as well as how it interoperates with other proposals.
          </li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-14"><div class="header-wrapper"><h3 id="x17-4-initial-api-summary-quick-api-proposal"><bdi class="secno">17.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-14" aria-label="Permalink for Section 17.4"></a></div>
        
        <p>Below is a definition for the proposed new CustomElementRegistry API.</p>
        <pre aria-busy="false"><code class="hljs javascript">  CustomElementRegistry#defineLazy(tagName: string, <span class="hljs-attr">loader</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">Promise</span>);
</code></pre>
      </section>
      <section id="key-scenarios-14"><div class="header-wrapper"><h3 id="x17-5-key-scenarios"><bdi class="secno">17.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-14" aria-label="Permalink for Section 17.5"></a></div>
        
        <p>
          </p><ul>
            <li>
              Enable bundlers to split code based on the presence of dynamic import calls. Tools like guess.js can integrate with bundlers to provide statistical analysis of actual usage, optimizing bundles better. This proposal would enable that type of integration.
            </li>
            <li>
              Enable consumers of web components to not have to worry about handling the loading of the code in every place where a component is used. This is important in systems where the content may leverage a potential large number of Web Components but where only a few are actually needed in any given experience. E.g. News sites, feeds, etc.
            </li>
            <li>
              Firefox has an internal API for lazy loading definitions.
            </li>
          </ul>
        <p></p>
      </section>
      <section id="concerns-13"><div class="header-wrapper"><h3 id="x17-6-concerns"><bdi class="secno">17.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-13" aria-label="Permalink for Section 17.6"></a></div>
        
        <ul>
          <li>
            This feature could make it easy to create a "loading pyramid". e.g. Component A loads, which causes B and C to load, which then cause D and E to load, etc.
          </li>
        </ul>
      </section>
      <section id="dissenting-opinion-10"><div class="header-wrapper"><h3 id="x17-7-dissenting-opinion"><bdi class="secno">17.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-10" aria-label="Permalink for Section 17.7"></a></div>
        
        <ul>
          <li>
            Breaks Principle of Least Surprise. If you see a component in the HTML, you expect to be able to interact with it. But this may fail due to the component not being loaded yet.
          </li>
          <li>
            Seems backward to have the browser tell the experience when to load code, rather than the experience telling the browser.
          </li>
          <li>
            Rather than focusing on this high level feature, we should instead add low-level APIs that enable building this feature with a few lines of code. Recognizes that MutationObserver is not sufficient, but isn't convinced about lazy definitions.
          </li>
        </ul>
      </section>
      <section id="related-specs-13"><div class="header-wrapper"><h3 id="x17-8-related-specs"><bdi class="secno">17.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-13" aria-label="Permalink for Section 17.8"></a></div>
        
        <ul>
          <li>
            <a href="#scoped-element-registries">Scoped Custom Element Registries</a>
          </li>
          <li>
            <a href="#declarative-shadow-dom">Declarative Shadow DOM</a>
          </li>
          <li>
            <a href="#children-changed-callback">Children Changed Callback</a>
          </li>
          <li>
            <a href="https://github.com/whatwg/dom/issues/533">Observable Node Connectedness</a>
          </li>
          <li>
            <a href="https://github.com/webcomponents-cg/community-protocols/blob/main/proposals/pending-task.md">Pending Task Protocol</a>
          </li>
        </ul>
      </section>
      <section id="open-questions-12"><div class="header-wrapper"><h3 id="x17-9-open-questions"><bdi class="secno">17.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-12" aria-label="Permalink for Section 17.9"></a></div>
        
        <ul>
          <li>
            How do we handle ElementDefinitionOptions? CustomElementDefinition isn't defined in the proposal above. Does it include this? How?
          </li>
          <li>
            Should there be a parallel API to unload a definition?
          </li>
          <li>
            Should there be additional configuration options for load triggers?
            <ul>
              <li>
                When certain attributes change.
              </li>
              <li>
                When certain events are fired.
              </li>
              <li>
                When scrolled into view.
              </li>
              <li>
                When the mouse is close.
              </li>
            </ul>
          </li>
          <li>
            How does this work with sync calls to document.createElement?
          </li>
          <li>
            Should there be wild card registrations that can be used to load collections of components based on a pattern?
          </li>
          <li>
            Could all of this be handled by a more general-purpose callback that was simply fired when an unknown element name is seen?
          </li>
          <li>
            How do we handle lazy definitions when someone calls "get" on the CustomElementsRegistry?
          </li>
          <li>
            If a component is lazy defined but has not yet loaded, what happens when someone tries to synchronously define an element with the same name?
          </li>
          <li>
            How does a component know when all its lazily loaded children are done loading?
          </li>
          <li>
            Should there be a more declarative API for this to tell the parser where to fine unknown elements?
          </li>
        </ul>
      </section>
    </section>
    <section id="open-styling-of-shadow-roots"><div class="header-wrapper"><h2 id="x18-open-styling-of-shadow-roots"><bdi class="secno">18. </bdi>Open styling of shadow roots</h2><a class="self-link" href="#open-styling-of-shadow-roots" aria-label="Permalink for Section 18."></a></div>
      
      <section id="links-15"><div class="header-wrapper"><h3 id="x18-1-links"><bdi class="secno">18.1 </bdi>Links</h3><a class="self-link" href="#links-15" aria-label="Permalink for Section 18.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/2021.html#open-styling-of-shadow-roots">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd>---</dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section id="description-15"><div class="header-wrapper"><h3 id="x18-2-description"><bdi class="secno">18.2 </bdi>Description</h3><a class="self-link" href="#description-15" aria-label="Permalink for Section 18.2"></a></div>
        
        <p>---</p>
      </section>
      <section id="status-15"><div class="header-wrapper"><h3 id="x18-3-status"><bdi class="secno">18.3 </bdi>Status</h3><a class="self-link" href="#status-15" aria-label="Permalink for Section 18.3"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-15"><div class="header-wrapper"><h3 id="x18-4-initial-api-summary-quick-api-proposal"><bdi class="secno">18.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-15" aria-label="Permalink for Section 18.4"></a></div>
        
        <p>Summary or proposal based on current status; paragraph(s) and code.</p>
      </section>
      <section id="key-scenarios-15"><div class="header-wrapper"><h3 id="x18-5-key-scenarios"><bdi class="secno">18.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-15" aria-label="Permalink for Section 18.5"></a></div>
        
        <p>---</p>
      </section>
      <section id="concerns-14"><div class="header-wrapper"><h3 id="x18-6-concerns"><bdi class="secno">18.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-14" aria-label="Permalink for Section 18.6"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="dissenting-opinion-11"><div class="header-wrapper"><h3 id="x18-7-dissenting-opinion"><bdi class="secno">18.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-11" aria-label="Permalink for Section 18.7"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="related-specs-14"><div class="header-wrapper"><h3 id="x18-8-related-specs"><bdi class="secno">18.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-14" aria-label="Permalink for Section 18.8"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="open-questions-13"><div class="header-wrapper"><h3 id="x18-9-open-questions"><bdi class="secno">18.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-13" aria-label="Permalink for Section 18.9"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
    </section>
    <section id="scoped-element-registries"><div class="header-wrapper"><h2 id="x19-scoped-element-registries"><bdi class="secno">19. </bdi>Scoped Element Registries</h2><a class="self-link" href="#scoped-element-registries" aria-label="Permalink for Section 19."></a></div>
      
      <section id="links-16"><div class="header-wrapper"><h3 id="x19-1-links"><bdi class="secno">19.1 </bdi>Links</h3><a class="self-link" href="#links-16" aria-label="Permalink for Section 19.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/2021.html#scoped-element-registries">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/WICG/webcomponents/issues/716">WICG/webcomponents#716</a></dd>
          <dt>Browser positions:</dt>
          <dd>
            <ul>
              <li>
                <a href="https://github.com/WebKit/standards-positions/issues/38">WebKit</a>
              </li>
              <li>
                <a href="https://groups.google.com/a/chromium.org/g/blink-dev/c/um-9YjJWyEQ/m/MhKN0L7FAgAJ">Chromium</a>
              </li>
              <li>
                <a href="https://github.com/mozilla/standards-positions/issues/424">Mozilla</a>
              </li>
            </ul>
          </dd>
        </dl>
      </section>
      <section id="description-16"><div class="header-wrapper"><h3 id="x19-2-description"><bdi class="secno">19.2 </bdi>Description</h3><a class="self-link" href="#description-16" aria-label="Permalink for Section 19.2"></a></div>
        
        <p>Scoped element registries allow custom element definitions to be scoped to one or more shadow roots. This allows the same tag name to be used with different implementations in different parts of the page, greatly reducing tag name collisions.</p>
      </section>
      <section id="status-16"><div class="header-wrapper"><h3 id="x19-3-status"><bdi class="secno">19.3 </bdi>Status</h3><a class="self-link" href="#status-16" aria-label="Permalink for Section 19.3"></a></div>
        
        <ul>
          <li>Chromium: prototyping</li>
          <li>WebKit: ?</li>
          <li>Mozilla: ?</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-16"><div class="header-wrapper"><h3 id="x19-4-initial-api-summary-quick-api-proposal"><bdi class="secno">19.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-16" aria-label="Permalink for Section 19.4"></a></div>
        
        <p>Summary or proposal based on current status; paragraph(s) and code.</p>
      </section>
      <section id="key-scenarios-16"><div class="header-wrapper"><h3 id="x19-5-key-scenarios"><bdi class="secno">19.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-16" aria-label="Permalink for Section 19.5"></a></div>
        
        <ul>
          <li>Building an app npm lbiraries that define elements. npm may duplicate packages and therefore custom element definitions.</li>
          <li>Complex multi-team applications. Sub-teams often develop and deploy subsystems separately and may include multiple copies of libraries that define custom elements.</li>
          <li>Complex elements with other custom elements as internal implementation detail. These elements may not want to take up names in the global registry for their sub-components.</li>
          <li>Distributing elements via npm and CDNs. If both distribution methods are used on a page, one will error. npm usage can be directed to use scoped registries to avoid collisions.</li>
          <li>Plug in systems. Plug-ins might bring their own custom element definitions which should not collide with the application or other plugins.</li>
        </ul>
      </section>
      <section id="concerns-15"><div class="header-wrapper"><h3 id="x19-6-concerns"><bdi class="secno">19.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-15" aria-label="Permalink for Section 19.6"></a></div>
        
        <ul>
          <li>Interaction with declarative shadow DOM (addressed)</li>
        </ul>
      </section>
      <section id="dissenting-opinion-12"><div class="header-wrapper"><h3 id="x19-7-dissenting-opinion"><bdi class="secno">19.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-12" aria-label="Permalink for Section 19.7"></a></div>
        
        <ul>
          <li>None</li>
        </ul>
      </section>
      <section id="related-specs-15"><div class="header-wrapper"><h3 id="x19-8-related-specs"><bdi class="secno">19.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-15" aria-label="Permalink for Section 19.8"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="open-questions-14"><div class="header-wrapper"><h3 id="x19-9-open-questions"><bdi class="secno">19.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-14" aria-label="Permalink for Section 19.9"></a></div>
        
        <ul>
          <li><a href="https://github.com/WICG/webcomponents/issues/914">[scoped-registries] Interaction with declarative shadow DOM #914</a></li>
          <li><a href="https://github.com/WICG/webcomponents/issues/907">Scoped Custom Element Registry: Moving elements with shadow roots between documents #907</a></li>
          <li><a href="https://github.com/WICG/webcomponents/issues/923">[scoped-registries] Element upgrade ordering #923</a></li>
        </ul>
      </section>
    </section>
    <section id="styling-children-of-slotted-content"><div class="header-wrapper"><h2 id="x20-styling-children-of-slotted-content"><bdi class="secno">20. </bdi>Styling children of slotted content</h2><a class="self-link" href="#styling-children-of-slotted-content" aria-label="Permalink for Section 20."></a></div>
      
      <section id="links-17"><div class="header-wrapper"><h3 id="x20-1-links"><bdi class="secno">20.1 </bdi>Links</h3><a class="self-link" href="#links-17" aria-label="Permalink for Section 20.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd>N/A</dd>
          <dt>GitHub issues:</dt>
          <dd>---</dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section id="description-17"><div class="header-wrapper"><h3 id="x20-2-description"><bdi class="secno">20.2 </bdi>Description</h3><a class="self-link" href="#description-17" aria-label="Permalink for Section 20.2"></a></div>
        
        <p>---</p>
      </section>
      <section id="status-17"><div class="header-wrapper"><h3 id="x20-3-status"><bdi class="secno">20.3 </bdi>Status</h3><a class="self-link" href="#status-17" aria-label="Permalink for Section 20.3"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-17"><div class="header-wrapper"><h3 id="x20-4-initial-api-summary-quick-api-proposal"><bdi class="secno">20.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-17" aria-label="Permalink for Section 20.4"></a></div>
        
        <p>Summary or proposal based on current status; paragraph(s) and code.</p>
      </section>
      <section id="key-scenarios-17"><div class="header-wrapper"><h3 id="x20-5-key-scenarios"><bdi class="secno">20.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-17" aria-label="Permalink for Section 20.5"></a></div>
        
        <p>---</p>
      </section>
      <section id="concerns-16"><div class="header-wrapper"><h3 id="x20-6-concerns"><bdi class="secno">20.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-16" aria-label="Permalink for Section 20.6"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="dissenting-opinion-13"><div class="header-wrapper"><h3 id="x20-7-dissenting-opinion"><bdi class="secno">20.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-13" aria-label="Permalink for Section 20.7"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="related-specs-16"><div class="header-wrapper"><h3 id="x20-8-related-specs"><bdi class="secno">20.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-16" aria-label="Permalink for Section 20.8"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="open-questions-15"><div class="header-wrapper"><h3 id="x20-9-open-questions"><bdi class="secno">20.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-15" aria-label="Permalink for Section 20.9"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
    </section>
    <section id="theming"><div class="header-wrapper"><h2 id="x21-theming"><bdi class="secno">21. </bdi>Theming</h2><a class="self-link" href="#theming" aria-label="Permalink for Section 21."></a></div>
      
      <section id="links-18"><div class="header-wrapper"><h3 id="x21-1-links"><bdi class="secno">21.1 </bdi>Links</h3><a class="self-link" href="#links-18" aria-label="Permalink for Section 21.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd>N/A</dd>
          <dt>GitHub issues:</dt>
          <dd>
            <ul>
              <li><a href="https://github.com/WICG/webcomponents/issues/864">2020 discussion - open</a></li>
            </ul>
          </dd>
          <dt>Browser positions:</dt>
          <dd>N/A</dd>
          <dt>Explainers</dt>
          <dd><a href="https://github.com/fergald/docs/blob/master/explainers/css-shadow-parts-1.md">Original explainer</a></dd>
        </dl>
      </section>
      <section id="description-18"><div class="header-wrapper"><h3 id="x21-2-description"><bdi class="secno">21.2 </bdi>Description</h3><a class="self-link" href="#description-18" aria-label="Permalink for Section 21.2"></a></div>
        
        <p>Provide a solution for deep cross-shadow root styling of web components without the forwarding needed using ::part or the granularity needed using CSS variables.</p>
      </section>
      <section id="status-18"><div class="header-wrapper"><h3 id="x21-3-status"><bdi class="secno">21.3 </bdi>Status</h3><a class="self-link" href="#status-18" aria-label="Permalink for Section 21.3"></a></div>
        
        <ul>
          <li>Uncertain - Dropped from spec once but discussions are ongoing.</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-18"><div class="header-wrapper"><h3 id="x21-4-initial-api-summary-quick-api-proposal"><bdi class="secno">21.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-18" aria-label="Permalink for Section 21.4"></a></div>
        
        <p>The original proposal suggested using a similar syntax as with shadow parts.</p>
        <pre aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">x-button</span>&gt;</span>
  #shadow-root
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">theme</span>=<span class="hljs-string">"button"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">x-button</span>&gt;</span></code></pre>
        <pre aria-busy="false"><code class="hljs css"><span class="hljs-selector-pseudo">:root</span>::<span class="hljs-built_in">theme</span>(button) { ... }</code></pre>
        <p>Further discussions after ::theme was initially dropped from the spec have also suggested <a href="https://github.com/WICG/webcomponents/issues/864#issuecomment-591484810">creating new media query types for theming</a> for better readability and allowing for versioning.</p>
        <pre aria-busy="false"><code class="hljs css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">theme-name</span>: vaadin) <span class="hljs-keyword">and</span> (<span class="hljs-attribute">theme-version</span>: <span class="hljs-number">2.0</span>) {
  <span class="hljs-selector-pseudo">:is</span>(vaadin-text-field, vaadin-select)<span class="hljs-selector-pseudo">:dir</span>(rtl)<span class="hljs-selector-pseudo">::part</span>(<span class="hljs-selector-tag">input</span>-field)<span class="hljs-selector-pseudo">::after</span> {
    <span class="hljs-attribute">transform-origin</span>: <span class="hljs-number">0%</span> <span class="hljs-number">0</span>;
  }
}</code></pre>
        <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">// registering the theme on the author side</span>
<span class="hljs-built_in">this</span>.attachShadow({ <span class="hljs-attr">mode</span>: <span class="hljs-string">'open'</span>, <span class="hljs-attr">theme</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'vaadin'</span>, <span class="hljs-attr">version</span>: <span class="hljs-string">'2.0'</span> }});</code></pre>
        <p>The media query solution wouldn't completely eliminate the need for the ::theme selector as it doesn't solve the issue with exporting shadow parts.</p>
      </section>
      <section id="key-scenarios-18"><div class="header-wrapper"><h3 id="x21-5-key-scenarios"><bdi class="secno">21.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-18" aria-label="Permalink for Section 21.5"></a></div>
        
        <ul>
          <li>Page-wide theming when using component libraries: CSS variables and shadow parts somewhat allow for this to happen. However, CSS variables are too granular so you end up using too many of them. Shadow parts on the other hand require extensive forwarding which can make maintenance difficult for library authors.</li>
        </ul>
      </section>
      <section id="concerns-17"><div class="header-wrapper"><h3 id="x21-6-concerns"><bdi class="secno">21.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-17" aria-label="Permalink for Section 21.6"></a></div>
        
        <ul>
          <li>Limited theming: Many component authors would want to have a way to limit which CSS properties are subject to a theme.</li>
          <li>Versioning and interactions with scoped registries: A theming solution would need to consider the possibility of multiple versions of a same component coexisting in a complex application.</li>
        </ul>
      </section>
      <section id="dissenting-opinion-14"><div class="header-wrapper"><h3 id="x21-7-dissenting-opinion"><bdi class="secno">21.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-14" aria-label="Permalink for Section 21.7"></a></div>
        
        <ul>
          <li>Some people seem to consider open shadow root styling would solve most of their theming-related issues.</li>
        </ul>
      </section>
      <section id="related-specs-17"><div class="header-wrapper"><h3 id="x21-8-related-specs"><bdi class="secno">21.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-17" aria-label="Permalink for Section 21.8"></a></div>
        
        <ul>
          <li><a href="https://www.w3.org/TR/css-shadow-parts-1/">CSS Shadow Parts</a></li>
        </ul>
      </section>
      <section id="open-questions-16"><div class="header-wrapper"><h3 id="x21-9-open-questions"><bdi class="secno">21.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-16" aria-label="Permalink for Section 21.9"></a></div>
        
        <ul>
          <li>How necessary is a functionality to limit what CSS properties apply? Would this be an allow-list or a block-list?</li>
          <li>How to work around having multiple versions of the same component? Using a versioning system for themes? Interact with scoped element registries?</li>
        </ul>
      </section>
    </section>
    <section id="feature-or-problem"><div class="header-wrapper"><h2 id="x22-feature-or-problem"><bdi class="secno">22. </bdi>Feature or Problem</h2><a class="self-link" href="#feature-or-problem" aria-label="Permalink for Section 22."></a></div>
      
      <section id="links-19"><div class="header-wrapper"><h3 id="x22-1-links"><bdi class="secno">22.1 </bdi>Links</h3><a class="self-link" href="#links-19" aria-label="Permalink for Section 22.1"></a></div>
        
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd>N/A</dd>
          <dt>GitHub issues:</dt>
          <dd>---</dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section id="description-19"><div class="header-wrapper"><h3 id="x22-2-description"><bdi class="secno">22.2 </bdi>Description</h3><a class="self-link" href="#description-19" aria-label="Permalink for Section 22.2"></a></div>
        
        <p>---</p>
      </section>
      <section id="status-19"><div class="header-wrapper"><h3 id="x22-3-status"><bdi class="secno">22.3 </bdi>Status</h3><a class="self-link" href="#status-19" aria-label="Permalink for Section 22.3"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="initial-api-summary-quick-api-proposal-19"><div class="header-wrapper"><h3 id="x22-4-initial-api-summary-quick-api-proposal"><bdi class="secno">22.4 </bdi>Initial API Summary/Quick API Proposal</h3><a class="self-link" href="#initial-api-summary-quick-api-proposal-19" aria-label="Permalink for Section 22.4"></a></div>
        
        <p>Summary or proposal based on current status; paragraph(s) and code.</p>
      </section>
      <section id="key-scenarios-19"><div class="header-wrapper"><h3 id="x22-5-key-scenarios"><bdi class="secno">22.5 </bdi>Key Scenarios</h3><a class="self-link" href="#key-scenarios-19" aria-label="Permalink for Section 22.5"></a></div>
        
        <p>---</p>
      </section>
      <section id="concerns-18"><div class="header-wrapper"><h3 id="x22-6-concerns"><bdi class="secno">22.6 </bdi>Concerns</h3><a class="self-link" href="#concerns-18" aria-label="Permalink for Section 22.6"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="dissenting-opinion-15"><div class="header-wrapper"><h3 id="x22-7-dissenting-opinion"><bdi class="secno">22.7 </bdi>Dissenting Opinion</h3><a class="self-link" href="#dissenting-opinion-15" aria-label="Permalink for Section 22.7"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="related-specs-18"><div class="header-wrapper"><h3 id="x22-8-related-specs"><bdi class="secno">22.8 </bdi>Related Specs</h3><a class="self-link" href="#related-specs-18" aria-label="Permalink for Section 22.8"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section id="open-questions-17"><div class="header-wrapper"><h3 id="x22-9-open-questions"><bdi class="secno">22.9 </bdi>Open Questions</h3><a class="self-link" href="#open-questions-17" aria-label="Permalink for Section 22.9"></a></div>
        
        <ul>
          <li>---</li>
        </ul>
      </section>
    </section>
    <section id="conformance"><div class="header-wrapper"><h2 id="x23-conformance"><bdi class="secno">23. </bdi>Conformance</h2><a class="self-link" href="#conformance" aria-label="Permalink for Section 23."></a></div><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p>
      <p>
        This is required for specifications that contain normative material.
      </p>
    </section>
    <section id="index" class="appendix"><div class="header-wrapper"><h2 id="a-index"><bdi class="secno">A. </bdi>Index</h2><a class="self-link" href="#index" aria-label="Permalink for Appendix A."></a></div><section id="index-defined-here"><div class="header-wrapper"><h3 id="a-1-terms-defined-by-this-specification"><bdi class="secno">A.1 </bdi>Terms defined by this specification</h3><a class="self-link" href="#index-defined-here" aria-label="Permalink for Appendix A.1"></a></div>
    
    <ul class="index">
    
  </ul>
  </section><section id="index-defined-elsewhere"><div class="header-wrapper"><h3 id="a-2-terms-defined-by-reference"><bdi class="secno">A.2 </bdi>Terms defined by reference</h3><a class="self-link" href="#index-defined-elsewhere" aria-label="Permalink for Appendix A.2"></a></div>
    
    <ul class="index">
    
  </ul>
  </section></section>
  

<p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>